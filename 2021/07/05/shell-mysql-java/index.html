<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="一名Java开发人员。">
    <meta name="keyword"  content="">
    <link rel="shortcut icon" href="/img/favicon.ico">

    <title>
        
          Shell、MySQL常用命令、Java相关 - 邓佳的博客 | Jia Blog
        
    </title>

    <link rel="canonical" href="http://dengjia.top/2021/07/05/shell-mysql-java/">

    <!-- Bootstrap Core CSS -->
    
<link rel="stylesheet" href="/css/bootstrap.min.css">


    <!-- Custom CSS -->
    
<link rel="stylesheet" href="/css/hux-blog.min.css">


    <!-- Pygments Highlight CSS -->
    
<link rel="stylesheet" href="/css/highlight.css">


    <!-- Custom Fonts -->
    <!-- <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"> -->
    <!-- Hux change font-awesome CDN to qiniu -->
    <link href="https://cdn.staticfile.org/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">


    <!-- Hux Delete, sad but pending in China
    <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/
    css'>
    -->


    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- ga & ba script hoook -->
    <script></script>
<meta name="generator" content="Hexo 5.4.0"></head>


<!-- hack iOS CSS :active style -->
<body ontouchstart="">
<!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Jia`s Blog</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <!-- Known Issue, found by Hux:
            <nav>'s height woule be hold on by its content.
            so, when navbar scale out, the <nav> will cover tags.
            also mask any touch event of tags, unfortunately.
        -->
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/">Home</a>
                    </li>
                    
                        
                            <li>
                                <a href="/about/">About</a>
                            </li>
                        
                    
                        
                            <li>
                                <a href="/archives/">Archives</a>
                            </li>
                        
                    
                        
                    
                        
                            <li>
                                <a href="/tags/">Tags</a>
                            </li>
                        
                    
                </ul>
            </div>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>
<script>
    // Drop Bootstarp low-performance Navbar
    // Use customize navbar with high-quality material design animation
    // in high-perf jank-free CSS3 implementation
    var $body = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    $toggle.addEventListener('click', handleMagic)

    function handleMagic(e) {
        if ($navbar.className.indexOf('in') > 0) {
            // CLOSE
            $navbar.className = " ";
            // wait until animation end.
            setTimeout(function () {
                // prevent frequently toggle
                if ($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            }, 400)
        } else {
            // OPEN
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }
</script>


<!-- Main Content -->

<!-- Image to hack wechat -->
<!-- <img src="http://dengjia.top/img/icon_wechat.png" width="0" height="0"> -->
<!-- <img src="{{ site.baseurl }}/{% if page.header-img %}{{ page.header-img }}{% else %}{{ site.header-img }}{% endif %}" width="0" height="0"> -->

<!-- Post Header -->
<style type="text/css">
    header.intro-header{
        background-image: url('/img/index.jpg')
    }
</style>
<header class="intro-header" >
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <div class="tags">
                        
                          <a class="tag" href="/tags/#MySQL" title="MySQL">MySQL</a>
                        
                          <a class="tag" href="/tags/#Shell" title="Shell">Shell</a>
                        
                          <a class="tag" href="/tags/#Java" title="Java">Java</a>
                        
                    </div>
                    <h1>Shell、MySQL常用命令、Java相关</h1>
                    <h2 class="subheading">Shell、MySQL常用命令、Java相关</h2>
                    <span class="meta">
                        Posted by Deng Jia on
                        2021-07-05
                    </span>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">

    <!-- Post Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                post-container">

                <h2 id="Shell"><a href="#Shell" class="headerlink" title="Shell"></a>Shell</h2><h3 id="vim"><a href="#vim" class="headerlink" title="vim"></a>vim</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">- 行号</span><br><span class="line">    1、显示行号 :set nu</span><br><span class="line">    2、取消显示行号 :set nonu</span><br><span class="line">    </span><br><span class="line">- VIM 全局替换</span><br><span class="line">    1、基本的替换</span><br><span class="line">        1.1 :s/vivian/sky/ 替换当前行第一个 vivian 为 sky</span><br><span class="line">        1.2 :s/vivian/sky/g 替换当前行所有 vivian 为 sky</span><br><span class="line">        1.3 :n,$s/vivian/sky/ 替换第 n 行开始到最后一行中每一行的第一个 vivian 为 sky</span><br><span class="line">        1.4 :n,$s/vivian/sky/g 替换第 n 行开始到最后一行中每一行所有 vivian 为 sky（n 为数字，若 n 为 .，表示从当前行开始到最后一行）</span><br><span class="line">        1.5 :%s/vivian/sky/（等同于 :g/vivian/s//sky/）替换每一行的第一个 vivian 为 sky</span><br><span class="line">        1.6 :%s/vivian/sky/g（等同于 :g/vivian/s//sky/g） 替换每一行中所有 vivian 为 sky</span><br><span class="line">    2、可以使用 # 作为分隔符，此时中间出现的 / 不会作为分隔符</span><br><span class="line">        2.1 :s#vivian/#sky/# 替换当前行第一个 vivian/ 为 sky/</span><br><span class="line">        2.2 :%s+/oradata/apras/+/user01/apras1+ （使用+ 来替换 / ）： /oradata/apras/替换成/user01/apras1/</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="cp"><a href="#cp" class="headerlink" title="cp"></a>cp</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">复制文件，定义新文件名称 cp a.txt b.txt</span><br><span class="line">复制目录，定义新目录名称 cp -r doc1 doc2</span><br></pre></td></tr></table></figure>

<h3 id="tar"><a href="#tar" class="headerlink" title="tar"></a>tar</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">压缩：</span><br><span class="line">  压缩文件 tar -czf file.tar.gz file.txt</span><br><span class="line">  压缩目录 tar -czf doc.tar.gz doc</span><br><span class="line">  </span><br><span class="line">解压：</span><br><span class="line">  解压至指定目录 tar -xzvf file.tar.gz -C /home/test</span><br><span class="line">  解压至当前目录 tar -xzvf file.tar.gz</span><br></pre></td></tr></table></figure>


<h3 id="touch"><a href="#touch" class="headerlink" title="touch"></a>touch</h3><blockquote>
<p>创建文件</p>
</blockquote>
<h3 id="mkdir"><a href="#mkdir" class="headerlink" title="mkdir"></a>mkdir</h3><blockquote>
<p>创建目录</p>
</blockquote>
<ul>
<li>创建目录<code>mkdir dir1</code></li>
</ul>
<h3 id="docker"><a href="#docker" class="headerlink" title="docker"></a>docker</h3><blockquote>
<p>docker导出容器内部日志信息到本地</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 导出容器最近1个小时的日志信息</span></span><br><span class="line">docker logs --since 60m 23ab5c69fc39 &gt;&gt; log.txt</span><br><span class="line"><span class="meta">#</span><span class="bash"> 导出容器某一时间段的日志信息</span></span><br><span class="line">docker logs --since &quot;2022-12-21T10:00:00&quot; --until &quot;2022-12-21T11:00:00&quot; 23ab5c69fc39 &gt;&gt; log.txt</span><br></pre></td></tr></table></figure>

<blockquote>
<p>列出指定的容器的端口映射，或者查找将PRIVATE_PORT NAT到面向公众的端口。</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> docker port kafka</span></span><br><span class="line">9092/tcp -&gt; 0.0.0.0:9092</span><br></pre></td></tr></table></figure>

<h2 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h2><h3 id="使用mysql"><a href="#使用mysql" class="headerlink" title="使用mysql"></a>使用mysql</h3><ul>
<li>展示数据库，使用数据库；展示数据表。</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">SHOW</span> DATABASES;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------------+</span></span><br><span class="line"><span class="operator">|</span> Database                   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------------+</span></span><br><span class="line"><span class="operator">|</span> blog                       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> bookshop                   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> boot_cache                 <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> bootvue                    <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> device                     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> ems                        <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> febs_security              <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> haiyu                      <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> information_schema         <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> ldms                       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> learn                      <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> mmt_cloud                  <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> mydb                       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> mysql                      <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> nacos_config               <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> performance_schema         <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> practice_teaching_base_ems <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> security                   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> spring_cloud               <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> ssm                        <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> sys                        <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------------+</span></span><br><span class="line"><span class="number">21</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span></span><br><span class="line">    (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">    mysql<span class="operator">&gt;</span></span><br><span class="line">USE learn;</span><br><span class="line">Database changed</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">SHOW</span> TABLES;</span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------+</span></span><br><span class="line"><span class="operator">|</span> Tables_in_learn <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------+</span></span><br><span class="line"><span class="operator">|</span> city            <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> dept            <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> emp             <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> emp_bak         <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> myview1         <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> pro             <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> salgrade        <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> t_act           <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> t_user          <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="keyword">user</span>            <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> user_tbl        <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------+</span></span><br><span class="line"><span class="number">11</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span></span><br><span class="line">    (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<ul>
<li>显示表列</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>、<span class="keyword">SHOW</span> COLUMNS <span class="keyword">FROM</span> emp;</span><br><span class="line"></span><br><span class="line"><span class="number">2</span>、<span class="keyword">DESCRIBE</span> emp;</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">DESCRIBE</span> emp;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> Field    <span class="operator">|</span> Type        <span class="operator">|</span> <span class="keyword">Null</span> <span class="operator">|</span> Key <span class="operator">|</span> <span class="keyword">Default</span> <span class="operator">|</span> Extra <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> EMPNO    <span class="operator">|</span> <span class="type">int</span>         <span class="operator">|</span> <span class="keyword">NO</span>   <span class="operator">|</span> PRI <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> ENAME    <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">10</span>) <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> JOB      <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">9</span>)  <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> MGR      <span class="operator">|</span> <span class="type">int</span>         <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> HIREDATE <span class="operator">|</span> <span class="type">date</span>        <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> SAL      <span class="operator">|</span> <span class="keyword">double</span>(<span class="number">7</span>,<span class="number">2</span>) <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> COMM     <span class="operator">|</span> <span class="keyword">double</span>(<span class="number">7</span>,<span class="number">2</span>) <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> DEPTNO   <span class="operator">|</span> <span class="type">int</span>         <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="number">8</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span></span><br><span class="line">    (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<h3 id="检索数据"><a href="#检索数据" class="headerlink" title="检索数据"></a>检索数据</h3><ul>
<li>检索单列</li>
<li>检索多列（,）</li>
<li>检索所有列（*）</li>
<li>检索不同的行</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">SELECT</span> deptno</span><br><span class="line"><span class="keyword">FROM</span> emp;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+</span></span><br><span class="line"><span class="operator">|</span> deptno <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+</span></span><br><span class="line"><span class="number">14</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span></span><br><span class="line">    (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"># 解决办法是使用<span class="keyword">DISTINCT</span>关键字，顾名思义，此关键字指示MySQL只返回不同的值。</span><br><span class="line"></span><br><span class="line">    mysql<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> deptno</span><br><span class="line"><span class="keyword">FROM</span> emp;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+</span></span><br><span class="line"><span class="operator">|</span> deptno <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+</span></span><br><span class="line"><span class="number">3</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span></span><br><span class="line">    (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<ul>
<li>限制结果</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">SELECT</span> ename</span><br><span class="line"><span class="keyword">FROM</span> emp</span><br><span class="line">LIMIT <span class="number">5</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+</span></span><br><span class="line"><span class="operator">|</span> ename  <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+</span></span><br><span class="line"><span class="operator">|</span> SMITH  <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> ALLEN  <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> WARD   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> JONES  <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> MARTIN <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+</span></span><br><span class="line"><span class="number">5</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span></span><br><span class="line">    (<span class="number">0.01</span> sec)</span><br><span class="line"># LIMIT <span class="number">5</span>指示MySQL返回不多于<span class="number">5</span>行。</span><br><span class="line"></span><br><span class="line">    mysql<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">SELECT</span> ename</span><br><span class="line"><span class="keyword">FROM</span> emp</span><br><span class="line">LIMIT <span class="number">3</span>, <span class="number">4</span>;</span><br><span class="line">mysql<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">SELECT</span> ename</span><br><span class="line"><span class="keyword">FROM</span> emp</span><br><span class="line">LIMIT <span class="number">4</span> <span class="keyword">OFFSET</span> <span class="number">3</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+</span></span><br><span class="line"><span class="operator">|</span> ename  <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+</span></span><br><span class="line"><span class="operator">|</span> JONES  <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> MARTIN <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> BLAKE  <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> CLARK  <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+</span></span><br><span class="line"><span class="number">4</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span></span><br><span class="line">    (<span class="number">0.00</span> sec)</span><br><span class="line"># LIMIT <span class="number">3</span>, <span class="number">4</span>（LIMIT <span class="number">4</span> <span class="keyword">OFFSET</span> <span class="number">3</span>）指示MySQL返回从行<span class="number">3</span>开始的<span class="number">4</span>行。</span><br></pre></td></tr></table></figure>

<h3 id="排序检索数据"><a href="#排序检索数据" class="headerlink" title="排序检索数据"></a>排序检索数据</h3><ul>
<li>排序数据（ORDER BY）</li>
<li>按多个排序（排序按顺序进行）</li>
<li>指定排序方向（DESC降序，默认ASC升序）</li>
</ul>
<h3 id="过滤数据"><a href="#过滤数据" class="headerlink" title="过滤数据"></a>过滤数据</h3><ul>
<li><p>使用WHERE子句</p>
</li>
<li><p>WHERE子句操作符（&lt;&gt;、!=不等于，BETWEEN在指定的两个值之间）</p>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> emp</span><br><span class="line"><span class="keyword">WHERE</span> sal <span class="keyword">BETWEEN</span> <span class="number">1000</span> <span class="keyword">AND</span> <span class="number">2000</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+--------+----------+------+------------+---------+---------+--------+</span></span><br><span class="line"><span class="operator">|</span> EMPNO <span class="operator">|</span> ENAME  <span class="operator">|</span> JOB      <span class="operator">|</span> MGR  <span class="operator">|</span> HIREDATE   <span class="operator">|</span> SAL     <span class="operator">|</span> COMM    <span class="operator">|</span> DEPTNO <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+--------+----------+------+------------+---------+---------+--------+</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7499</span> <span class="operator">|</span> ALLEN  <span class="operator">|</span> SALESMAN <span class="operator">|</span> <span class="number">7698</span> <span class="operator">|</span> <span class="number">1981</span><span class="number">-02</span><span class="number">-20</span> <span class="operator">|</span> <span class="number">1600.00</span> <span class="operator">|</span>  <span class="number">300.00</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7521</span> <span class="operator">|</span> WARD   <span class="operator">|</span> SALESMAN <span class="operator">|</span> <span class="number">7698</span> <span class="operator">|</span> <span class="number">1981</span><span class="number">-02</span><span class="number">-22</span> <span class="operator">|</span> <span class="number">1250.00</span> <span class="operator">|</span>  <span class="number">500.00</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7654</span> <span class="operator">|</span> MARTIN <span class="operator">|</span> SALESMAN <span class="operator">|</span> <span class="number">7698</span> <span class="operator">|</span> <span class="number">1981</span><span class="number">-09</span><span class="number">-28</span> <span class="operator">|</span> <span class="number">1250.00</span> <span class="operator">|</span> <span class="number">1400.00</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7844</span> <span class="operator">|</span> TURNER <span class="operator">|</span> SALESMAN <span class="operator">|</span> <span class="number">7698</span> <span class="operator">|</span> <span class="number">1981</span><span class="number">-09</span><span class="number">-08</span> <span class="operator">|</span> <span class="number">1500.00</span> <span class="operator">|</span>    <span class="number">0.00</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7876</span> <span class="operator">|</span> ADAMS  <span class="operator">|</span> CLERK    <span class="operator">|</span> <span class="number">7788</span> <span class="operator">|</span> <span class="number">1987</span><span class="number">-05</span><span class="number">-23</span> <span class="operator">|</span> <span class="number">1100.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7934</span> <span class="operator">|</span> MILLER <span class="operator">|</span> CLERK    <span class="operator">|</span> <span class="number">7782</span> <span class="operator">|</span> <span class="number">1982</span><span class="number">-01</span><span class="number">-23</span> <span class="operator">|</span> <span class="number">1300.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+--------+----------+------+------------+---------+---------+--------+</span></span><br><span class="line"><span class="number">6</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span></span><br><span class="line">    (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<ul>
<li>空值检查（IS NULL）</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> emp</span><br><span class="line"><span class="keyword">WHERE</span> mgr <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------+-----------+------+------------+---------+------+--------+</span></span><br><span class="line"><span class="operator">|</span> EMPNO <span class="operator">|</span> ENAME <span class="operator">|</span> JOB       <span class="operator">|</span> MGR  <span class="operator">|</span> HIREDATE   <span class="operator">|</span> SAL     <span class="operator">|</span> COMM <span class="operator">|</span> DEPTNO <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------+-----------+------+------------+---------+------+--------+</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7839</span> <span class="operator">|</span> KING  <span class="operator">|</span> PRESIDENT <span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span> <span class="number">1981</span><span class="number">-11</span><span class="number">-17</span> <span class="operator">|</span> <span class="number">5000.00</span> <span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------+-----------+------+------------+---------+------+--------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span></span><br><span class="line">    (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<ul>
<li><p>OR操作符</p>
</li>
<li><p>计算次序（OR操作符优先级高于AND操作符）</p>
<blockquote>
<p>在WHERE子句中使用圆括号 任何时候使用具有AND和OR操作符的WHERE子句，都应该使用圆括号明确地分组操作符。不要过分依赖默认计算次序，即使它确实是你想要的东西也是如此。使用圆括号没有什么坏处，它能消除歧义。</p>
</blockquote>
</li>
<li><p>IN操作符（指定条件范围）</p>
</li>
<li><p>NOT操作符（有且只有一个功能，否定它之后所跟的任何条件）</p>
</li>
</ul>
<h3 id="用通配符进行过滤"><a href="#用通配符进行过滤" class="headerlink" title="用通配符进行过滤"></a>用通配符进行过滤</h3><ul>
<li><p>LIKE操作符</p>
<ul>
<li>通配符（wildcard）<ul>
<li>%（表示任何字符出现任意次数，%不能匹配NULL。）</li>
<li>_（总是匹配单个字符）</li>
</ul>
</li>
<li>搜索模式（search pattern）</li>
</ul>
</li>
<li><p>使用通配符的技巧</p>
</li>
</ul>
<blockquote>
<p>正如所见， MySQL的通配符很有用。但这种功能是有代价的：通配符搜索的处理一般要比前面讨论的其他搜索所花时间更长。这里给出一些使用通配符要记住的技巧。</p>
<ol>
<li>不要过度使用通配符。如果其他操作符能达到相同的目的，应该<br>使用其他操作符。</li>
<li>在确实需要使用通配符时，除非绝对有必要，否则不要把它们用<br>在搜索模式的开始处。把通配符置于搜索模式的开始处，搜索起<br>来是最慢的。</li>
<li>仔细注意通配符的位置。如果放错地方，可能不会返回想要的数据。</li>
</ol>
</blockquote>
<h3 id="用正则表达式进行搜索"><a href="#用正则表达式进行搜索" class="headerlink" title="用正则表达式进行搜索"></a>用正则表达式进行搜索</h3><ul>
<li>基本字符匹配</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">SELECT</span> ename</span><br><span class="line"><span class="keyword">FROM</span> emp</span><br><span class="line"><span class="keyword">WHERE</span> ename REGEXP <span class="string">&#x27;O&#x27;</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+</span></span><br><span class="line"><span class="operator">|</span> ename <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+</span></span><br><span class="line"><span class="operator">|</span> JONES <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> SCOTT <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> FORD  <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+</span></span><br><span class="line"><span class="number">3</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span></span><br><span class="line">    (<span class="number">0.14</span> sec)</span><br><span class="line"># 除关键字<span class="keyword">LIKE</span>被REGEXP替代外，这条语句看上去非常像使用<span class="keyword">LIKE</span>的语句。</span><br><span class="line"></span><br><span class="line"># <span class="keyword">LIKE</span>匹配整个列。如果被匹配的文本在列值中出现，<span class="keyword">LIKE</span>将不会找到它，相应的行也不被返回（除非使用通配符）。而REGEXP在列值内进行匹配，如果被匹配的文本在列值中出现， REGEXP将会找到它，相应的行将被返回。这是一个非常重要的差别。</span><br></pre></td></tr></table></figure>

<ul>
<li>进行OR匹配（使用 |，可以给出两个以上的OR条件，如：’1000 | 2000 | 3000’）</li>
<li>匹配几个字符之一（使用 [ ]）</li>
<li>匹配范围（[0-9]，[a-z]）</li>
<li>匹配特殊字符（ <code>\\.表示查找. \\-表示查找-</code> ）</li>
<li>匹配字符类</li>
<li>匹配多个实例</li>
<li>定位符</li>
</ul>
<h3 id="创建计算字段"><a href="#创建计算字段" class="headerlink" title="创建计算字段"></a>创建计算字段</h3><ul>
<li>拼接</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">SELECT</span> concat(ename, <span class="string">&#x27;(&#x27;</span>, sal, <span class="string">&#x27;)&#x27;</span>) <span class="keyword">AS</span> <span class="string">&#x27;emp(sal)&#x27;</span></span><br><span class="line"><span class="keyword">FROM</span> emp</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> sal;</span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------+</span></span><br><span class="line"><span class="operator">|</span> emp(sal)        <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------+</span></span><br><span class="line"><span class="operator">|</span> SMITH(<span class="number">800.00</span>)   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> JAMES(<span class="number">950.00</span>)   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> ADAMS(<span class="number">1100.00</span>)  <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> WARD(<span class="number">1250.00</span>)   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> MARTIN(<span class="number">1250.00</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> MILLER(<span class="number">1300.00</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> TURNER(<span class="number">1500.00</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> ALLEN(<span class="number">1600.00</span>)  <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> CLARK(<span class="number">2695.00</span>)  <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> SCOTT(<span class="number">3000.00</span>)  <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> FORD(<span class="number">3000.00</span>)   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> BLAKE(<span class="number">3135.00</span>)  <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> JONES(<span class="number">3272.50</span>)  <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> KING(<span class="number">5000.00</span>)   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------+</span></span><br><span class="line"><span class="number">14</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span></span><br><span class="line">    (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<ul>
<li>使用别名（AS）</li>
<li>执行算术计算（列名进行+-*/）</li>
</ul>
<h3 id="使用数据处理函数"><a href="#使用数据处理函数" class="headerlink" title="使用数据处理函数"></a>使用数据处理函数</h3><ul>
<li>文本处理函数</li>
</ul>
<table>
<thead>
<tr>
<th>函数</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>Left()</td>
<td>返回串左边的字符</td>
</tr>
<tr>
<td>Length()</td>
<td>返回串的长度</td>
</tr>
<tr>
<td>Locate()</td>
<td>找出串的一个子串</td>
</tr>
<tr>
<td>Lower()</td>
<td>将串转换为小写</td>
</tr>
<tr>
<td>LTrim()</td>
<td>去掉串左边的空格</td>
</tr>
<tr>
<td>Right()</td>
<td>返回串右边的字符</td>
</tr>
<tr>
<td>RTrim()</td>
<td>去掉串右边的空格</td>
</tr>
<tr>
<td>Soundex()</td>
<td>返回串的SOUNDEX值</td>
</tr>
<tr>
<td>SubString()</td>
<td>返回子串的字符</td>
</tr>
<tr>
<td>Upper()</td>
<td>将串转换为大写</td>
</tr>
</tbody></table>
<ul>
<li>日期和时间处理函数</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"># 匹配日期</span><br><span class="line">mysql<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> emp</span><br><span class="line"><span class="keyword">WHERE</span> <span class="type">date</span>(hiredate) <span class="operator">=</span> <span class="string">&#x27;87-04-19&#x27;</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------+---------+------+------------+---------+------+--------+</span></span><br><span class="line"><span class="operator">|</span> EMPNO <span class="operator">|</span> ENAME <span class="operator">|</span> JOB     <span class="operator">|</span> MGR  <span class="operator">|</span> HIREDATE   <span class="operator">|</span> SAL     <span class="operator">|</span> COMM <span class="operator">|</span> DEPTNO <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------+---------+------+------------+---------+------+--------+</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7788</span> <span class="operator">|</span> SCOTT <span class="operator">|</span> ANALYST <span class="operator">|</span> <span class="number">7566</span> <span class="operator">|</span> <span class="number">1987</span><span class="number">-04</span><span class="number">-19</span> <span class="operator">|</span> <span class="number">3000.00</span> <span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------+---------+------+------------+---------+------+--------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span></span><br><span class="line">    (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"># 匹配日期范围</span><br><span class="line">    mysql<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> emp</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">year</span>(hiredate) <span class="operator">=</span> <span class="string">&#x27;1981&#x27;</span></span><br><span class="line">  <span class="keyword">and</span> <span class="keyword">month</span>(hiredate) <span class="operator">=</span> <span class="string">&#x27;02&#x27;</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------+----------+------+------------+---------+--------+--------+</span></span><br><span class="line"><span class="operator">|</span> EMPNO <span class="operator">|</span> ENAME <span class="operator">|</span> JOB      <span class="operator">|</span> MGR  <span class="operator">|</span> HIREDATE   <span class="operator">|</span> SAL     <span class="operator">|</span> COMM   <span class="operator">|</span> DEPTNO <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------+----------+------+------------+---------+--------+--------+</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7499</span> <span class="operator">|</span> ALLEN <span class="operator">|</span> SALESMAN <span class="operator">|</span> <span class="number">7698</span> <span class="operator">|</span> <span class="number">1981</span><span class="number">-02</span><span class="number">-20</span> <span class="operator">|</span> <span class="number">1600.00</span> <span class="operator">|</span> <span class="number">300.00</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7521</span> <span class="operator">|</span> WARD  <span class="operator">|</span> SALESMAN <span class="operator">|</span> <span class="number">7698</span> <span class="operator">|</span> <span class="number">1981</span><span class="number">-02</span><span class="number">-22</span> <span class="operator">|</span> <span class="number">1250.00</span> <span class="operator">|</span> <span class="number">500.00</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------+----------+------+------------+---------+--------+--------+</span></span><br><span class="line"><span class="number">2</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span></span><br><span class="line">    (<span class="number">0.02</span> sec)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>如果要的是日期，请使用Date() 如果你想要的仅是日期，则使用Date()是一个良好的习惯，即使你知道相应的列只包含日期也是如此。这样，如果由于某种原因表中以后有日期和时间值，你的SQL代码也不用改变。当然，也存在一个Time()函数，在你只想要时间时应该使用它。<br>Date()和Time()都是在MySQL 4.1.1中第一次引入的。</p>
</blockquote>
<ul>
<li>数值处理函数</li>
</ul>
<table>
<thead>
<tr>
<th>函数</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>Abs()</td>
<td>返回一个数的绝对值</td>
</tr>
<tr>
<td>Cos()</td>
<td>返回一个角度的余弦</td>
</tr>
<tr>
<td>Exp()</td>
<td>返回一个数的指数值</td>
</tr>
<tr>
<td>Mod()</td>
<td>返回除操作的余数</td>
</tr>
<tr>
<td>Pi()</td>
<td>返回圆周率</td>
</tr>
<tr>
<td>Rand()</td>
<td>返回一个随机数</td>
</tr>
<tr>
<td>Sin()</td>
<td>返回一个角度的正弦</td>
</tr>
<tr>
<td>Sqrt()</td>
<td>返回一个数的平方根</td>
</tr>
<tr>
<td>Tan()</td>
<td>返回一个角度的正切</td>
</tr>
</tbody></table>
<h3 id="汇总数据"><a href="#汇总数据" class="headerlink" title="汇总数据"></a>汇总数据</h3><ul>
<li>聚集函数<ul>
<li>AVG()</li>
<li>COUNT()</li>
<li>MAX()</li>
<li>MIN()</li>
<li>SUM()</li>
</ul>
</li>
<li>聚集不同值</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">avg</span>(<span class="keyword">distinct</span> sal) <span class="keyword">as</span> avg_sal</span><br><span class="line"><span class="keyword">from</span> emp;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+</span></span><br><span class="line"><span class="operator">|</span> avg_sal     <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2133.541667</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span></span><br><span class="line">    (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<ul>
<li>组合聚集函数</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">as</span> num_items, <span class="built_in">min</span>(sal) <span class="keyword">as</span> min_sal, <span class="built_in">max</span>(sal) <span class="keyword">as</span> max_sal, <span class="built_in">avg</span>(sal) <span class="keyword">as</span> avg_sal</span><br><span class="line"><span class="keyword">from</span> emp;</span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+---------+---------+-------------+</span></span><br><span class="line"><span class="operator">|</span> num_items <span class="operator">|</span> min_sal <span class="operator">|</span> max_sal <span class="operator">|</span> avg_sal     <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+---------+---------+-------------+</span></span><br><span class="line"><span class="operator">|</span>        <span class="number">14</span> <span class="operator">|</span>  <span class="number">800.00</span> <span class="operator">|</span> <span class="number">5000.00</span> <span class="operator">|</span> <span class="number">2132.321429</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+---------+---------+-------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span></span><br><span class="line">    (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<h3 id="分组数据"><a href="#分组数据" class="headerlink" title="分组数据"></a>分组数据</h3><ul>
<li><p>数据分组（ count(*) ）</p>
</li>
<li><p>创建分组（GROUP BY）</p>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">sum</span>(sal), <span class="built_in">avg</span>(sal), <span class="built_in">count</span>(<span class="operator">*</span>)</span><br><span class="line"><span class="keyword">from</span> emp</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> deptno;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-------------+----------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">sum</span>(sal) <span class="operator">|</span> <span class="built_in">avg</span>(sal)    <span class="operator">|</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-------------+----------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">11172.50</span> <span class="operator">|</span> <span class="number">2234.500000</span> <span class="operator">|</span>        <span class="number">5</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">9685.00</span> <span class="operator">|</span> <span class="number">1614.166667</span> <span class="operator">|</span>        <span class="number">6</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">8995.00</span> <span class="operator">|</span> <span class="number">2998.333333</span> <span class="operator">|</span>        <span class="number">3</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-------------+----------+</span></span><br><span class="line"><span class="number">3</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span></span><br><span class="line">    (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<ul>
<li>过滤分组（HAVING）<ul>
<li>WHERE过滤行，HAVING过滤分组；</li>
<li>WHERE在数据分组前过滤，HAVING在数据分组后过滤。</li>
</ul>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>)</span><br><span class="line"><span class="keyword">from</span> emp</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> deptno</span><br><span class="line"><span class="keyword">having</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="operator">&gt;</span> <span class="number">3</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+</span></span><br><span class="line"><span class="operator">|</span>        <span class="number">5</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>        <span class="number">6</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+</span></span><br><span class="line"><span class="number">2</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span></span><br><span class="line">    (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure>

<ul>
<li>分组和排序（GROUP BY 和 ORDER BY）</li>
<li>SELECT字句顺序</li>
</ul>
<table>
<thead>
<tr>
<th>子句</th>
<th>说明</th>
<th>是否必须使用</th>
</tr>
</thead>
<tbody><tr>
<td>SELECT</td>
<td>要返回的列或表达式</td>
<td>是</td>
</tr>
<tr>
<td>FROM</td>
<td>从中检索数据的表</td>
<td>仅在从表选择数据时使用</td>
</tr>
<tr>
<td>WHERE</td>
<td>行级过滤</td>
<td>否</td>
</tr>
<tr>
<td>GROUP BY</td>
<td>分组说明</td>
<td>仅在按组计算聚集时使用</td>
</tr>
<tr>
<td>HAVING</td>
<td>组级过滤</td>
<td>否</td>
</tr>
<tr>
<td>ORDER BY</td>
<td>输出排序顺序</td>
<td>否</td>
</tr>
<tr>
<td>LIMIT</td>
<td>要检索的行数</td>
<td>否</td>
</tr>
</tbody></table>
<h3 id="使用子查询"><a href="#使用子查询" class="headerlink" title="使用子查询"></a>使用子查询</h3><ul>
<li>子查询（结合IN操作符使用）</li>
<li>作为计算字段使用子查询</li>
</ul>
<h3 id="联结表"><a href="#联结表" class="headerlink" title="联结表"></a>联结表</h3><ul>
<li>创建联结（WHERE指定联结条件）</li>
<li>笛卡尔积</li>
</ul>
<blockquote>
<p>由没有联结条件的表关系返回的结果为笛卡儿积。检索出的行的数目将是第一个表中的行数乘以第二个表中的行数。</p>
<p>应该保证所有联结都有WHERE子句，否则MySQL将返回比想要的数据多得多的数据。同理，应该保证WHERE子句的正确性。不正确的过滤条件将导致MySQL返回不正确的数据。</p>
<p>消除笛卡尔积最简单最直接的方式：使用等值连接。</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">select</span> dname, ename</span><br><span class="line"><span class="keyword">from</span> dept,</span><br><span class="line">     emp</span><br><span class="line"><span class="keyword">where</span> dept.deptno <span class="operator">=</span> emp.deptno;</span><br><span class="line"><span class="operator">+</span><span class="comment">------------+--------+</span></span><br><span class="line"><span class="operator">|</span> dname      <span class="operator">|</span> ename  <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------+--------+</span></span><br><span class="line"><span class="operator">|</span> RESEARCH   <span class="operator">|</span> SMITH  <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> SALES      <span class="operator">|</span> ALLEN  <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> SALES      <span class="operator">|</span> WARD   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> RESEARCH   <span class="operator">|</span> JONES  <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> SALES      <span class="operator">|</span> MARTIN <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> SALES      <span class="operator">|</span> BLAKE  <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> ACCOUNTING <span class="operator">|</span> CLARK  <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> RESEARCH   <span class="operator">|</span> SCOTT  <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> ACCOUNTING <span class="operator">|</span> KING   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> SALES      <span class="operator">|</span> TURNER <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> RESEARCH   <span class="operator">|</span> ADAMS  <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> SALES      <span class="operator">|</span> JAMES  <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> RESEARCH   <span class="operator">|</span> FORD   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> ACCOUNTING <span class="operator">|</span> MILLER <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------+--------+</span></span><br><span class="line"><span class="number">14</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span></span><br><span class="line">    (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<ul>
<li>内部联结（INNER JOIN）</li>
</ul>
<blockquote>
<p>ANSI SQL规范首选INNER JOIN语法。此外，尽管使用WHERE子句定义联结的确比较简单，但是使用明确的联结语法能够确保不会忘记联结条件，有时候这样做也能影响性能。</p>
</blockquote>
<ul>
<li>联结多个表</li>
</ul>
<blockquote>
<p>MySQL在运行时关联指定的每个表以处理联结。这种处理可能是非常耗费资源的，因此应该仔细，不要联结不必要的表。联结的表越多，性能下降越厉害。</p>
</blockquote>
<h3 id="创建高级联结"><a href="#创建高级联结" class="headerlink" title="创建高级联结"></a>创建高级联结</h3><ul>
<li><p>使用表别名</p>
</li>
<li><p>使用不同类型的联结</p>
<ul>
<li>自联结</li>
</ul>
<blockquote>
<p>使用自联结而不用子查询：</p>
<p>自联结通常作为外部语句用来替代从相同表中检索数据时使用的子查询语句。虽然最终的结果是相同的，但有时候处理联结远比处理子查询快得多。</p>
</blockquote>
<ul>
<li>自然联结（自然联结排除多次出现，使每个列只返回一次。一般使用通配符：SELECT *）</li>
<li>外部联结<ul>
<li>左连接（LEFT JOIN）</li>
<li>右链接（RIGHT JOIN）</li>
</ul>
</li>
</ul>
</li>
<li><p>使用带聚集函数的联结</p>
</li>
<li><p>使用联结和联结条件（应该总是提供联结条件，否则会得出笛卡尔积。）</p>
</li>
</ul>
<h3 id="组合查询"><a href="#组合查询" class="headerlink" title="组合查询"></a>组合查询</h3><ul>
<li>创建组合查询（UNION）</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> (<span class="keyword">select</span> ename,sal,deptno <span class="keyword">from</span> emp <span class="keyword">where</span> deptno <span class="keyword">in</span>(<span class="number">10</span>,<span class="number">20</span>)) <span class="keyword">union</span> (<span class="keyword">select</span> ename,sal,deptno <span class="keyword">from</span> emp <span class="keyword">where</span> sal<span class="operator">&gt;=</span><span class="number">3000</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+---------+--------+</span></span><br><span class="line"><span class="operator">|</span> ename  <span class="operator">|</span> sal     <span class="operator">|</span> deptno <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+---------+--------+</span></span><br><span class="line"><span class="operator">|</span> SMITH  <span class="operator">|</span>  <span class="number">800.00</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> JONES  <span class="operator">|</span> <span class="number">3272.50</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> CLARK  <span class="operator">|</span> <span class="number">2695.00</span> <span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> SCOTT  <span class="operator">|</span> <span class="number">3000.00</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> KING   <span class="operator">|</span> <span class="number">5000.00</span> <span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> ADAMS  <span class="operator">|</span> <span class="number">1100.00</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> FORD   <span class="operator">|</span> <span class="number">3000.00</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> MILLER <span class="operator">|</span> <span class="number">1300.00</span> <span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> BLAKE  <span class="operator">|</span> <span class="number">3135.00</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+---------+--------+</span></span><br><span class="line"><span class="number">9</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span></span><br><span class="line">    (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<ul>
<li>包含或取消重复的行</li>
</ul>
<blockquote>
<p>在使用UNION时，重复的行被自动取消，若想放回所有行，使用UNION ALL而不是UNION。</p>
</blockquote>
<ul>
<li>对组合查询结果排序</li>
</ul>
<blockquote>
<p>SELECT语句的输出用ORDER BY子句排序。在用UNION组合查询时，只能使用一条ORDER BY子句，它必须出现在最后一条SELECT语句之后。对于结果集，不存在用一种方式排序一部分，而又用另一种方式排序另一部分的情况，因此不允许使用多条ORDER BY子句。</p>
</blockquote>
<h3 id="全文本搜索（第18章）"><a href="#全文本搜索（第18章）" class="headerlink" title="全文本搜索（第18章）"></a>全文本搜索（第18章）</h3><h3 id="插入数据"><a href="#插入数据" class="headerlink" title="插入数据"></a>插入数据</h3><ul>
<li>插入完整行</li>
<li>插入多个行</li>
<li>插入检索出的数据</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">user</span>(name)</span><br><span class="line"><span class="keyword">select</span> name</span><br><span class="line"><span class="keyword">from</span> <span class="keyword">user</span>;</span><br><span class="line">Query OK, <span class="number">3</span> <span class="keyword">rows</span> affected (<span class="number">0.02</span> sec)</span><br><span class="line">Records: <span class="number">3</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">from</span> <span class="keyword">user</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">----+----------+</span></span><br><span class="line"><span class="operator">|</span> id <span class="operator">|</span> name     <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+----------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">11</span> <span class="operator">|</span> zhangsan <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">13</span> <span class="operator">|</span> lisi     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">14</span> <span class="operator">|</span> wangwu   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">15</span> <span class="operator">|</span> zhangsan <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">16</span> <span class="operator">|</span> lisi     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">17</span> <span class="operator">|</span> wangwu   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+----------+</span></span><br><span class="line"><span class="number">6</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span></span><br><span class="line">    (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"># <span class="keyword">INSERT</span> <span class="keyword">SELECT</span>中<span class="keyword">SELECT</span>语句可包含<span class="keyword">WHERE</span>子句以过滤插入的数据。</span><br></pre></td></tr></table></figure>

<h3 id="更新和删除数据"><a href="#更新和删除数据" class="headerlink" title="更新和删除数据"></a>更新和删除数据</h3><ul>
<li><p>更新数据（UPDATE … SET … WHERE …）</p>
</li>
<li><p>删除数据（DELETE FROM … WHERE …）</p>
</li>
</ul>
<blockquote>
<p>DELETE删除数据而不是表本身，TRUNCATE更快（TRUNCATE实际是删除原来的表并重新创建一个表，而不是逐行删除表中的数据）。</p>
</blockquote>
<h3 id="创建表和操纵表"><a href="#创建表和操纵表" class="headerlink" title="创建表和操纵表"></a>创建表和操纵表</h3><ul>
<li>创建表（CREATE）</li>
<li>更新表（ALERT）</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> <span class="keyword">user</span></span><br><span class="line">    <span class="keyword">add</span> age <span class="type">VARCHAR</span>(<span class="number">20</span>);</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.05</span> sec)</span><br><span class="line">Records: <span class="number">0</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">from</span> <span class="keyword">user</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">----+--------+------+</span></span><br><span class="line"><span class="operator">|</span> id <span class="operator">|</span> name   <span class="operator">|</span> age  <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+--------+------+</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">1</span> <span class="operator">|</span> 王五   <span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+--------+------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span></span><br><span class="line">    (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>使用ALTER TABLE要极为小心，应该在进行改动前做一个完整的备份（模式和数据的备份）。数据<br>库表的更改不能撤销，如果增加了不需要的列，可能不能删除它们。类似地，如果删除了不应该删除的列，可能会丢失该列中的所有数据。</p>
</blockquote>
<ul>
<li>删除表（DROP）</li>
<li>重命名表（RENAME TABLE T1 to T2）</li>
</ul>
<h3 id="使用视图"><a href="#使用视图" class="headerlink" title="使用视图"></a>使用视图</h3><ul>
<li>视图</li>
</ul>
<blockquote>
<p>视图是虚拟的表。与包含数据的表不一样，视图只包含使用时动态检索数据的查询。</p>
<p>为什么使用视图？</p>
<ol>
<li>重用SQL语句</li>
<li>简化复杂的SQL操作。在编写查询后，可以方便地重用它而不必知道它的基本查询细节。</li>
<li>使用表的组成部分而不是整个表。</li>
<li>保护数据。可以给用户授予表的特定部分的访问权限而不是整个表的访问权限。</li>
<li>更改数据格式和表示。视图可返回与底层表的表示和格式不同的数据。</li>
</ol>
</blockquote>
<ul>
<li>视图的规则和限制</li>
</ul>
<blockquote>
<p>下面是关于视图创建和使用的一些最常见的规则和限制。</p>
<ol>
<li>与表一样，视图必须唯一命名（不能给视图取与别的视图或表相同的名字）。</li>
<li>对于可以创建的视图数目没有限制。</li>
<li>为了创建视图，必须具有足够的访问权限。这些限制通常由数据库管理人员授予。</li>
<li>视图可以嵌套，即可以利用从其他视图中检索数据的查询来构造一个视图。</li>
<li>ORDER BY可以用在视图中，但如果从该视图检索数据SELECT中也含有ORDER BY，那么该视图中的ORDER BY将被覆盖。</li>
<li>视图不能索引，也不能有关联的触发器或默认值。</li>
<li>视图可以和表一起使用。例如，编写一条联结表和视图的SELECT语句。</li>
</ol>
</blockquote>
<ul>
<li>使用视图（CREATE VIEW）</li>
</ul>
<blockquote>
<p>视图用CREATE VIEW语句来创建。</p>
<ol>
<li>使用SHOW CREATE VIEW viewname；来查看创建视图的语句。</li>
<li>用DROP删除视图，其语法为DROP VIEW viewname;。</li>
<li>更新视图时，可以先用DROP再用CREATE，也可以直接用CREATE OR REPLACE VIEW。如果要更新的视图不存在，则第2条更新语句会创建一个视图；如果要更新的视图存在，则第2条更新语句会替换原<br>有视图。</li>
</ol>
</blockquote>
<ul>
<li>利用视图简化复杂的联结</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">view</span> empdept <span class="keyword">as</span></span><br><span class="line"><span class="keyword">select</span> ename, dname, sal</span><br><span class="line"><span class="keyword">from</span> emp</span><br><span class="line">         <span class="keyword">left</span> <span class="keyword">join</span> dept <span class="keyword">on</span> emp.deptno <span class="operator">=</span> dept.deptno</span><br><span class="line"><span class="keyword">where</span> sal <span class="operator">&lt;</span> <span class="number">2000</span>;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.04</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">from</span> empdept;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+------------+---------+</span></span><br><span class="line"><span class="operator">|</span> ename  <span class="operator">|</span> dname      <span class="operator">|</span> sal     <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+------------+---------+</span></span><br><span class="line"><span class="operator">|</span> SMITH  <span class="operator">|</span> RESEARCH   <span class="operator">|</span>  <span class="number">800.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> ALLEN  <span class="operator">|</span> SALES      <span class="operator">|</span> <span class="number">1600.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> WARD   <span class="operator">|</span> SALES      <span class="operator">|</span> <span class="number">1250.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> MARTIN <span class="operator">|</span> SALES      <span class="operator">|</span> <span class="number">1250.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> TURNER <span class="operator">|</span> SALES      <span class="operator">|</span> <span class="number">1500.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> ADAMS  <span class="operator">|</span> RESEARCH   <span class="operator">|</span> <span class="number">1100.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> JAMES  <span class="operator">|</span> SALES      <span class="operator">|</span>  <span class="number">950.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> MILLER <span class="operator">|</span> ACCOUNTING <span class="operator">|</span> <span class="number">1300.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+------------+---------+</span></span><br><span class="line"><span class="number">8</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span></span><br><span class="line">    (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"># 利用视图，可一次性编写基础的<span class="keyword">SQL</span>，然后根据需要多次使用。</span><br></pre></td></tr></table></figure>

<ul>
<li>用视图重新格式化检索出的数据（Concat）</li>
<li>用视图过滤不想要的数据（WHERE子句）</li>
<li>使用视图与计算字段</li>
<li>更新视图</li>
</ul>
<h3 id="使用存储过程"><a href="#使用存储过程" class="headerlink" title="使用存储过程"></a>使用存储过程</h3><ul>
<li>存储过程</li>
</ul>
<blockquote>
<p>存储过程简单来说，就是为以后的使用而保存的一条或多条MySQL语句的集合。可将其视为批文件，虽然它们的作用不仅限于批处理。</p>
<p>使用存储过程有3个主要的好处，即简单、安全、高性能。</p>
</blockquote>
<ul>
<li>执行存储过程（CALL）</li>
<li>创建存储过程（CREATE PROCEDURE productpricing()）</li>
<li>删除存储过程（DROP PROCEDURE productpricing）</li>
<li>使用参数</li>
<li>建立智能存储过程……</li>
<li>检查存储过程</li>
</ul>
<h3 id="使用游标"><a href="#使用游标" class="headerlink" title="使用游标"></a>使用游标</h3><ul>
<li>游标</li>
</ul>
<blockquote>
<p>不像多数DBMS， MySQL游标只能用于存储过程（和函数）。</p>
</blockquote>
<h3 id="使用触发器"><a href="#使用触发器" class="headerlink" title="使用触发器"></a>使用触发器</h3><h3 id="管理事务处理"><a href="#管理事务处理" class="headerlink" title="管理事务处理"></a>管理事务处理</h3><h3 id="常用函数、脚本示例"><a href="#常用函数、脚本示例" class="headerlink" title="常用函数、脚本示例"></a>常用函数、脚本示例</h3><h4 id="查看数据库版本"><a href="#查看数据库版本" class="headerlink" title="查看数据库版本"></a>查看数据库版本</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> version();</span><br></pre></td></tr></table></figure>

<h4 id="查看数据库引擎信息"><a href="#查看数据库引擎信息" class="headerlink" title="查看数据库引擎信息"></a>查看数据库引擎信息</h4><blockquote>
<p>tips：MySQL存储引擎是基于表的，而不是库的。</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> engines;</span><br><span class="line"><span class="keyword">show</span> variables <span class="keyword">like</span> <span class="string">&#x27;%storage_engine%&#x27;</span>;</span><br><span class="line"><span class="keyword">show</span> <span class="keyword">table</span> status <span class="keyword">from</span> his <span class="keyword">where</span> Name <span class="operator">=</span> <span class="string">&#x27;zy_bh0&#x27;</span>;</span><br></pre></td></tr></table></figure>

<h4 id="计算年龄"><a href="#计算年龄" class="headerlink" title="计算年龄"></a>计算年龄</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> DATE_FORMAT(FROM_DAYS(DATEDIFF(now(), <span class="string">&#x27;1999-04-09&#x27;</span>)), <span class="string">&#x27;%Y&#x27;</span>) <span class="operator">+</span> <span class="number">0</span> <span class="keyword">as</span> age;</span><br></pre></td></tr></table></figure>

<h4 id="格式化当前时间"><a href="#格式化当前时间" class="headerlink" title="格式化当前时间"></a>格式化当前时间</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> DATE_FORMAT(now(), <span class="string">&#x27;%Y-%m-%d %H:%i:%s&#x27;</span>) <span class="keyword">as</span> currentTime;</span><br></pre></td></tr></table></figure>

<h4 id="获取表结构信息"><a href="#获取表结构信息" class="headerlink" title="获取表结构信息"></a>获取表结构信息</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 获取表字段等其他信息</span></span><br><span class="line"><span class="keyword">SELECT</span> c.COLUMN_NAME              `字段名称`,</span><br><span class="line">       c.COLUMN_TYPE              `字段类型`,</span><br><span class="line">       c.CHARACTER_MAXIMUM_LENGTH `字段最大长度`,</span><br><span class="line">       IF(c.EXTRA <span class="operator">=</span> <span class="string">&#x27;auto_increment&#x27;</span>,</span><br><span class="line">          CONCAT(c.COLUMN_KEY, <span class="string">&#x27;(&#x27;</span>, IF(c.EXTRA <span class="operator">=</span> <span class="string">&#x27;auto_increment&#x27;</span>, <span class="string">&#x27;自增长&#x27;</span>, c.EXTRA), <span class="string">&#x27;)&#x27;</span>),</span><br><span class="line">          c.COLUMN_KEY)           `主外键`,</span><br><span class="line">       c.IS_NULLABLE              `空标识`,</span><br><span class="line">       c.COLUMN_COMMENT           `字段说明`</span><br><span class="line"><span class="keyword">FROM</span> information_schema.COLUMNS c</span><br><span class="line"><span class="keyword">WHERE</span> c.TABLE_SCHEMA <span class="operator">=</span> <span class="string">&#x27;db_ms&#x27;</span></span><br><span class="line">  <span class="keyword">AND</span> c.TABLE_NAME <span class="operator">=</span> <span class="string">&#x27;user&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 获取表主键字段</span></span><br><span class="line"><span class="keyword">SELECT</span> k.COLUMN_NAME</span><br><span class="line"><span class="keyword">FROM</span> information_schema.table_constraints t</span><br><span class="line">         <span class="keyword">JOIN</span> information_schema.key_column_usage k <span class="keyword">USING</span> (constraint_name, table_schema, table_name)</span><br><span class="line"><span class="keyword">WHERE</span> t.constraint_type <span class="operator">=</span> <span class="string">&#x27;PRIMARY KEY&#x27;</span></span><br><span class="line">  <span class="keyword">AND</span> t.table_schema <span class="operator">=</span> <span class="string">&#x27;db_ms&#x27;</span></span><br><span class="line">  <span class="keyword">AND</span> t.table_name <span class="operator">=</span> <span class="string">&#x27;user&#x27;</span>;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th align="left">字段名称</th>
<th align="left">字段类型</th>
<th align="left">字段最大长度</th>
<th align="left">主外键</th>
<th align="left">空标识</th>
<th align="left">字段说明</th>
</tr>
</thead>
<tbody><tr>
<td align="left">create_at</td>
<td align="left">timestamp</td>
<td align="left">NULL</td>
<td align="left"></td>
<td align="left">YES</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">id</td>
<td align="left">int</td>
<td align="left">NULL</td>
<td align="left">PRI(自增长)</td>
<td align="left">NO</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">name</td>
<td align="left">varchar(50)</td>
<td align="left">50</td>
<td align="left"></td>
<td align="left">YES</td>
<td align="left">用户名</td>
</tr>
<tr>
<td align="left">pwd</td>
<td align="left">varchar(255)</td>
<td align="left">255</td>
<td align="left"></td>
<td align="left">YES</td>
<td align="left">密码</td>
</tr>
<tr>
<td align="left">update_at</td>
<td align="left">timestamp</td>
<td align="left">NULL</td>
<td align="left"></td>
<td align="left">YES</td>
<td align="left"></td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="left">COLUMN_NAME</th>
</tr>
</thead>
<tbody><tr>
<td align="left">id</td>
</tr>
</tbody></table>
<h4 id="修改库、表、表字段的字符编码集"><a href="#修改库、表、表字段的字符编码集" class="headerlink" title="修改库、表、表字段的字符编码集"></a>修改库、表、表字段的字符编码集</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 修改表字段</span></span><br><span class="line"><span class="keyword">SELECT</span> TABLE_SCHEMA                                                 <span class="string">&#x27;数据库&#x27;</span>,</span><br><span class="line">       TABLE_NAME                                                   <span class="string">&#x27;表&#x27;</span>,</span><br><span class="line">       COLUMN_NAME                                                  <span class="string">&#x27;字段&#x27;</span>,</span><br><span class="line">       CHARACTER_SET_NAME                                           <span class="string">&#x27;原字符集&#x27;</span>,</span><br><span class="line">       COLLATION_NAME                                               <span class="string">&#x27;原排序规则&#x27;</span>,</span><br><span class="line">       CONCAT(<span class="string">&#x27;ALTER TABLE &#x27;</span>, TABLE_SCHEMA, <span class="string">&#x27;.&#x27;</span>, TABLE_NAME, <span class="string">&#x27; MODIFY COLUMN &#x27;</span>, COLUMN_NAME, <span class="string">&#x27; &#x27;</span>, COLUMN_TYPE,</span><br><span class="line">              <span class="string">&#x27; CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci;&#x27;</span>) <span class="string">&#x27;修正SQL&#x27;</span></span><br><span class="line"><span class="keyword">FROM</span> information_schema.`COLUMNS`</span><br><span class="line"><span class="keyword">WHERE</span> COLLATION_NAME RLIKE <span class="string">&#x27;gb2312_chinese_ci&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 修改表</span></span><br><span class="line"><span class="keyword">SELECT</span> TABLE_SCHEMA                           <span class="string">&#x27;数据库&#x27;</span>,</span><br><span class="line">       TABLE_NAME                             <span class="string">&#x27;表&#x27;</span>,</span><br><span class="line">       TABLE_COLLATION                        <span class="string">&#x27;原排序规则&#x27;</span>,</span><br><span class="line">       CONCAT(<span class="string">&#x27;ALTER TABLE &#x27;</span>, TABLE_SCHEMA, <span class="string">&#x27;.&#x27;</span>, TABLE_NAME,</span><br><span class="line">              <span class="string">&#x27; COLLATE=utf8mb4_general_ci;&#x27;</span>) <span class="string">&#x27;修正SQL&#x27;</span></span><br><span class="line"><span class="keyword">FROM</span> information_schema.`TABLES`</span><br><span class="line"><span class="keyword">WHERE</span> TABLE_COLLATION RLIKE <span class="string">&#x27;gb2312_chinese_ci&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 修改数据库</span></span><br><span class="line"><span class="keyword">SELECT</span> SCHEMA_NAME                                                  <span class="string">&#x27;数据库&#x27;</span>,</span><br><span class="line">       DEFAULT_CHARACTER_SET_NAME                                   <span class="string">&#x27;原字符集&#x27;</span>,</span><br><span class="line">       DEFAULT_COLLATION_NAME                                       <span class="string">&#x27;原排序规则&#x27;</span>,</span><br><span class="line">       CONCAT(<span class="string">&#x27;ALTER DATABASE &#x27;</span>, SCHEMA_NAME,</span><br><span class="line">              <span class="string">&#x27; CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci;&#x27;</span>) <span class="string">&#x27;修正SQL&#x27;</span></span><br><span class="line"><span class="keyword">FROM</span> information_schema.`SCHEMATA`</span><br><span class="line"><span class="keyword">WHERE</span> SCHEMA_NAME <span class="operator">=</span> <span class="string">&#x27;myemployees&#x27;</span></span><br><span class="line">  <span class="keyword">AND</span> DEFAULT_CHARACTER_SET_NAME RLIKE <span class="string">&#x27;gb2312&#x27;</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="操作XML格式字符串"><a href="#操作XML格式字符串" class="headerlink" title="操作XML格式字符串"></a>操作XML格式字符串</h4><p><a href ="https://www.cnblogs.com/DJOSIMON/p/16199163.html" target="_self">操作XML格式字符串</a></p>
<h4 id="MySQL分组后选出最大值所在的那一行数据"><a href="#MySQL分组后选出最大值所在的那一行数据" class="headerlink" title="MySQL分组后选出最大值所在的那一行数据"></a>MySQL分组后选出最大值所在的那一行数据</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 方法一：</span></span><br><span class="line"><span class="keyword">select</span> a.<span class="operator">*</span></span><br><span class="line"><span class="keyword">from</span> order_main a</span><br><span class="line">         <span class="keyword">inner</span> <span class="keyword">join</span> (<span class="keyword">select</span> user_id, <span class="built_in">max</span>(create_time) <span class="keyword">as</span> create_time <span class="keyword">from</span> order_main <span class="keyword">group</span> <span class="keyword">by</span> user_id) b</span><br><span class="line">                    <span class="keyword">on</span> a.user_id <span class="operator">=</span> b.user_id <span class="keyword">and</span> a.create_time <span class="operator">=</span> b.create_time;</span><br><span class="line"><span class="comment">-- 方法二：</span></span><br><span class="line"><span class="keyword">select</span> a.<span class="operator">*</span></span><br><span class="line"><span class="keyword">from</span> order_main a,</span><br><span class="line">     (<span class="keyword">select</span> user_id, <span class="built_in">max</span>(create_time) <span class="keyword">as</span> create_time <span class="keyword">from</span> order_main <span class="keyword">group</span> <span class="keyword">by</span> user_id) b</span><br><span class="line"><span class="keyword">where</span> a.user_id <span class="operator">=</span> b.user_id</span><br><span class="line">  <span class="keyword">and</span> a.create_time <span class="operator">=</span> b.create_time;</span><br></pre></td></tr></table></figure>

<h4 id="MySQL查看唯一索引方式"><a href="#MySQL查看唯一索引方式" class="headerlink" title="MySQL查看唯一索引方式"></a>MySQL查看唯一索引方式</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> tab.table_id, tab.name, idx.name, idx.type</span><br><span class="line"><span class="keyword">from</span> information_schema.INNODB_SYS_TABLES tab</span><br><span class="line">         <span class="keyword">left</span> <span class="keyword">outer</span> <span class="keyword">join</span> information_schema.INNODB_SYS_INDEXES idx <span class="keyword">on</span> tab.table_id <span class="operator">=</span> idx.table_id <span class="keyword">and</span> idx.type <span class="keyword">in</span> (<span class="number">2</span>)</span><br><span class="line"><span class="keyword">where</span> tab.name <span class="keyword">like</span> <span class="string">&#x27;his%&#x27;</span></span><br><span class="line">  <span class="keyword">and</span> idx.NAME <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> tab.name</span><br><span class="line">;</span><br></pre></td></tr></table></figure>

<h2 id="工具类"><a href="#工具类" class="headerlink" title="工具类"></a>工具类</h2><h3 id="正则校验工具类"><a href="#正则校验工具类" class="headerlink" title="正则校验工具类"></a>正则校验工具类</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: DengJia</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span>: 2022/5/10</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: 正则校验工具类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RegexUtil</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 移动手机号</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Pattern MOBILE_RE = Pattern.compile(<span class="string">&quot;^[1][3,4,5,7,8][0-9]&#123;9&#125;$&quot;</span>);</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 带区号的电话</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Pattern PHONE_WITH_AREA_CODE_RE = Pattern.compile(<span class="string">&quot;^[0][1-9]&#123;2,3&#125;-[0-9]&#123;5,10&#125;$&quot;</span>);</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 不带区号的电话</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Pattern PHONE_WITHOUT_AREA_CODE_RE = Pattern.compile(<span class="string">&quot;^[1-9]&#123;1&#125;[0-9]&#123;5,8&#125;$&quot;</span>);</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 邮箱格式正则表达式</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Pattern EMAIL_RE = Pattern.compile(<span class="string">&quot;^\\w+@(\\w+\\.)+\\w+$&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 身份证</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Pattern ID_CARD_RE = Pattern.compile(<span class="string">&quot;^\\d&#123;15&#125;|\\d&#123;17&#125;[\\dxX]$&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 校验联系（手机、电话）号码是否合法</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> number 号码</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">validatePhoneNumber</span><span class="params">(String number)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!(isPhone(number) || isMobile(number))) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">&quot;号码校验失败，请输入合法格式！&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 校验电子邮箱是否合法</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> email 电子邮箱</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">validateEmail</span><span class="params">(String email)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!email.matches(EMAIL_RE.pattern())) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">&quot;邮箱校验失败，请输入合法格式！&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 校验身份证是否合法</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> idCard 身份证</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">validateIdCard</span><span class="params">(String idCard)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!idCard.matches(ID_CARD_RE.pattern())) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">&quot;身份证校验失败，请输入合法格式！&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 校验身份证与入参年龄、性别是否符合</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> idCard 身份证</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> age    年龄</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> gender 性别 1男 2女</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">validatePersonalInfo</span><span class="params">(String idCard, Integer age, Integer gender)</span> </span>&#123;</span><br><span class="line">        validateIdCard(idCard);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 校验年龄</span></span><br><span class="line">        <span class="keyword">if</span> (age != <span class="keyword">null</span>) &#123;</span><br><span class="line">            Calendar cal = Calendar.getInstance();</span><br><span class="line">            <span class="keyword">int</span> nowYear = cal.get(Calendar.YEAR), nowMonth = cal.get(Calendar.MONTH) + <span class="number">1</span>, nowDay = cal.get(Calendar.DATE), year = Integer.parseInt(idCard.substring(<span class="number">6</span>, <span class="number">10</span>)), month = Integer.parseInt(idCard.substring(<span class="number">10</span>, <span class="number">12</span>)), day = Integer.parseInt(idCard.substring(<span class="number">12</span>, <span class="number">14</span>));</span><br><span class="line"></span><br><span class="line">            <span class="keyword">int</span> realAge;</span><br><span class="line">            <span class="keyword">boolean</span> reach = (month &lt; nowMonth) || (month == nowMonth &amp;&amp; day &lt;= nowDay);</span><br><span class="line">            <span class="keyword">if</span> (reach) &#123;</span><br><span class="line">                realAge = nowYear - year;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                realAge = nowYear - year - <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (!Objects.equals(age, realAge)) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">&quot;年龄与身份证不符，请检查！&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 校验性别</span></span><br><span class="line">        <span class="keyword">if</span> (gender != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">int</span> flag = <span class="keyword">new</span> Integer(idCard.substring(<span class="number">16</span>, <span class="number">17</span>)) % <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">boolean</span> match = flag == <span class="number">1</span> ? <span class="number">1</span> == gender : <span class="number">2</span> == gender;</span><br><span class="line">            <span class="keyword">if</span> (!match) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">&quot;性别与身份证不符，请检查！&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">validatePersonalInfo</span><span class="params">(String idCard, String age, String gender)</span> </span>&#123;</span><br><span class="line">        validatePersonalInfo(idCard, Integer.parseInt(age), Integer.parseInt(gender));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">isMobile</span><span class="params">(<span class="keyword">final</span> String number)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 手机号验证</span></span><br><span class="line">        Matcher matcher = MOBILE_RE.matcher(number);</span><br><span class="line">        <span class="keyword">return</span> matcher.matches();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">isPhone</span><span class="params">(<span class="keyword">final</span> String number)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 电话号码验证</span></span><br><span class="line">        Matcher matcher;</span><br><span class="line">        <span class="keyword">if</span> (number.length() &gt; <span class="number">9</span>) &#123;</span><br><span class="line">            matcher = PHONE_WITH_AREA_CODE_RE.matcher(number);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            matcher = PHONE_WITHOUT_AREA_CODE_RE.matcher(number);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> matcher.matches();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="集合元素求异"><a href="#集合元素求异" class="headerlink" title="集合元素求异"></a>集合元素求异</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: DengJia</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span>: 2021/9/24 15:07</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: 获取两个集合中不同的数据</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GetGatherDiff</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        String[] a = &#123;<span class="keyword">null</span>, <span class="string">&quot;21&quot;</span>, <span class="string">&quot;0&quot;</span>, <span class="string">&quot;39.42&quot;</span>, <span class="string">&quot;1013.34&quot;</span>, <span class="string">&quot;39.42&quot;</span>, <span class="string">&quot;3&quot;</span>, <span class="string">&quot;4.61&quot;</span>, <span class="string">&quot;14&quot;</span>, <span class="string">&quot;56&quot;</span>, <span class="string">&quot;56&quot;</span>, <span class="string">&quot;3&quot;</span>, <span class="string">&quot;9.22&quot;</span>, <span class="string">&quot;337.78&quot;</span>, <span class="string">&quot;0&quot;</span>, <span class="string">&quot;4&quot;</span>, <span class="string">&quot;18&quot;</span>, <span class="string">&quot;38&quot;</span>, <span class="string">&quot;7&quot;</span>, <span class="string">&quot;7&quot;</span>, <span class="string">&quot;9&quot;</span>, <span class="string">&quot;8&quot;</span>, <span class="string">&quot;19&quot;</span>, <span class="string">&quot;50&quot;</span>, <span class="string">&quot;16&quot;</span>, <span class="string">&quot;2&quot;</span>, <span class="string">&quot;3.6&quot;</span>, <span class="string">&quot;1.36&quot;</span>, <span class="string">&quot;75&quot;</span>, <span class="string">&quot;4&quot;</span>, <span class="string">&quot;26&quot;</span>, <span class="string">&quot;9.22&quot;</span>, <span class="string">&quot;3&quot;</span>, <span class="string">&quot;39.42&quot;</span>, <span class="string">&quot;337.78&quot;</span>, <span class="string">&quot;26&quot;</span>, <span class="string">&quot;50&quot;</span>, <span class="string">&quot;7&quot;</span>, <span class="string">&quot;7&quot;</span>, <span class="string">&quot;56&quot;</span>, <span class="string">&quot;9&quot;</span>, <span class="string">&quot;4&quot;</span>, <span class="string">&quot;56&quot;</span>, <span class="string">&quot;19&quot;</span>, <span class="string">&quot;18&quot;</span>, <span class="string">&quot;38&quot;</span>, <span class="string">&quot;7&quot;</span>, <span class="string">&quot;56&quot;</span>, <span class="string">&quot;19&quot;</span>, <span class="string">&quot;18&quot;</span>, <span class="string">&quot;56&quot;</span>, <span class="string">&quot;38&quot;</span>, <span class="string">&quot;7&quot;</span>, <span class="string">&quot;9&quot;</span>, <span class="string">&quot;4&quot;</span>, <span class="string">&quot;56&quot;</span>, <span class="string">&quot;1&quot;</span>, <span class="string">&quot;9.6&quot;</span>, <span class="string">&quot;10&quot;</span>, <span class="string">&quot;236.52&quot;</span>, <span class="string">&quot;6.57&quot;</span>, <span class="string">&quot;80.99&quot;</span>, <span class="string">&quot;2.7&quot;</span>, <span class="string">&quot;0&quot;</span>, <span class="string">&quot;0&quot;</span>, <span class="string">&quot;0&quot;</span>, <span class="string">&quot;7&quot;</span>, <span class="string">&quot;5&quot;</span>, <span class="string">&quot;21&quot;</span>, <span class="string">&quot;2.7&quot;</span>, <span class="string">&quot;80.99&quot;</span>, <span class="string">&quot;7&quot;</span>, <span class="string">&quot;0&quot;</span>, <span class="string">&quot;0&quot;</span>, <span class="string">&quot;0&quot;</span>, <span class="string">&quot;5&quot;</span>, <span class="string">&quot;21&quot;</span>, <span class="string">&quot;35.26&quot;</span>, <span class="string">&quot;3&quot;</span>, <span class="string">&quot;337.78&quot;</span>, <span class="string">&quot;9.22&quot;</span>, <span class="string">&quot;2.7&quot;</span>, <span class="string">&quot;80.99&quot;</span>, <span class="string">&quot;50&quot;</span>, <span class="string">&quot;0&quot;</span>, <span class="string">&quot;0&quot;</span>, <span class="string">&quot;0&quot;</span>, <span class="string">&quot;7&quot;</span>, <span class="string">&quot;5&quot;</span>, <span class="string">&quot;21&quot;</span>, <span class="string">&quot;80.99&quot;</span>, <span class="string">&quot;2.7&quot;</span>, <span class="string">&quot;10&quot;</span>, <span class="string">&quot;2.7&quot;</span>, <span class="string">&quot;0&quot;</span>, <span class="string">&quot;0&quot;</span>, <span class="string">&quot;0&quot;</span>, <span class="string">&quot;7&quot;</span>, <span class="string">&quot;5&quot;</span>, <span class="string">&quot;21&quot;</span>, <span class="string">&quot;2.7&quot;</span>, <span class="string">&quot;80.99&quot;</span>, <span class="string">&quot;2.7&quot;</span>, <span class="string">&quot;10&quot;</span>, <span class="string">&quot;0&quot;</span>, <span class="string">&quot;0&quot;</span>, <span class="string">&quot;0&quot;</span>, <span class="string">&quot;7&quot;</span>, <span class="string">&quot;5&quot;</span>, <span class="string">&quot;21&quot;</span>, <span class="string">&quot;2.7&quot;</span>, <span class="string">&quot;10&quot;</span>, <span class="string">&quot;2.7&quot;</span>, <span class="string">&quot;80.99&quot;</span>, <span class="string">&quot;0&quot;</span>, <span class="string">&quot;0&quot;</span>, <span class="string">&quot;7&quot;</span>, <span class="string">&quot;0&quot;</span>, <span class="string">&quot;21&quot;</span>, <span class="string">&quot;5&quot;</span>, <span class="string">&quot;2.7&quot;</span>, <span class="string">&quot;80.99&quot;</span>, <span class="string">&quot;2.7&quot;</span>, <span class="string">&quot;10&quot;</span>, <span class="string">&quot;26&quot;</span>, <span class="string">&quot;7&quot;</span>, <span class="string">&quot;0&quot;</span>, <span class="string">&quot;0&quot;</span>, <span class="string">&quot;0&quot;</span>, <span class="string">&quot;40.49&quot;</span>, <span class="string">&quot;2.7&quot;</span>, <span class="string">&quot;40.49&quot;</span>, <span class="string">&quot;10&quot;</span>, <span class="string">&quot;2.7&quot;</span>, <span class="string">&quot;2.7&quot;</span>, <span class="string">&quot;21&quot;</span>, <span class="string">&quot;13&quot;</span>, <span class="string">&quot;4&quot;</span>, <span class="string">&quot;0&quot;</span>, <span class="string">&quot;0&quot;</span>, <span class="string">&quot;7&quot;</span>, <span class="string">&quot;0&quot;</span>&#125;;</span><br><span class="line">        String[] b = &#123;<span class="keyword">null</span>, <span class="string">&quot;21&quot;</span>, <span class="string">&quot;0&quot;</span>, <span class="string">&quot;39.42&quot;</span>, <span class="string">&quot;1013.34&quot;</span>, <span class="string">&quot;39.42&quot;</span>, <span class="string">&quot;4.61&quot;</span>, <span class="string">&quot;3&quot;</span>, <span class="string">&quot;14&quot;</span>, <span class="string">&quot;56&quot;</span>, <span class="string">&quot;56&quot;</span>, <span class="string">&quot;9.22&quot;</span>, <span class="string">&quot;3&quot;</span>, <span class="string">&quot;337.78&quot;</span>, <span class="string">&quot;4&quot;</span>, <span class="string">&quot;0&quot;</span>, <span class="string">&quot;8&quot;</span>, <span class="string">&quot;19&quot;</span>, <span class="string">&quot;18&quot;</span>, <span class="string">&quot;7&quot;</span>, <span class="string">&quot;9&quot;</span>, <span class="string">&quot;38&quot;</span>, <span class="string">&quot;7&quot;</span>, <span class="string">&quot;50&quot;</span>, <span class="string">&quot;3.6&quot;</span>, <span class="string">&quot;1.36&quot;</span>, <span class="string">&quot;16&quot;</span>, <span class="string">&quot;2&quot;</span>, <span class="string">&quot;75&quot;</span>, <span class="string">&quot;4&quot;</span>, <span class="string">&quot;26&quot;</span>, <span class="string">&quot;3&quot;</span>, <span class="string">&quot;39.42&quot;</span>, <span class="string">&quot;9.22&quot;</span>, <span class="string">&quot;337.78&quot;</span>, <span class="string">&quot;7&quot;</span>, <span class="string">&quot;9&quot;</span>, <span class="string">&quot;56&quot;</span>, <span class="string">&quot;38&quot;</span>, <span class="string">&quot;7&quot;</span>, <span class="string">&quot;56&quot;</span>, <span class="string">&quot;4&quot;</span>, <span class="string">&quot;19&quot;</span>, <span class="string">&quot;18&quot;</span>, <span class="string">&quot;26&quot;</span>, <span class="string">&quot;50&quot;</span>, <span class="string">&quot;56&quot;</span>, <span class="string">&quot;7&quot;</span>, <span class="string">&quot;19&quot;</span>, <span class="string">&quot;18&quot;</span>, <span class="string">&quot;9&quot;</span>, <span class="string">&quot;56&quot;</span>, <span class="string">&quot;38&quot;</span>, <span class="string">&quot;7&quot;</span>, <span class="string">&quot;4&quot;</span>, <span class="string">&quot;56&quot;</span>, <span class="string">&quot;1&quot;</span>, <span class="string">&quot;9.6&quot;</span>, <span class="string">&quot;10&quot;</span>, <span class="string">&quot;236.52&quot;</span>, <span class="string">&quot;6.57&quot;</span>, <span class="string">&quot;2.7&quot;</span>, <span class="string">&quot;80.99&quot;</span>, <span class="string">&quot;0&quot;</span>, <span class="string">&quot;0&quot;</span>, <span class="string">&quot;7&quot;</span>, <span class="string">&quot;0&quot;</span>, <span class="string">&quot;21&quot;</span>, <span class="string">&quot;5&quot;</span>, <span class="string">&quot;80.99&quot;</span>, <span class="string">&quot;2.7&quot;</span>, <span class="string">&quot;0&quot;</span>, <span class="string">&quot;0&quot;</span>, <span class="string">&quot;0&quot;</span>, <span class="string">&quot;7&quot;</span>, <span class="string">&quot;5&quot;</span>, <span class="string">&quot;21&quot;</span>, <span class="string">&quot;35.26&quot;</span>, <span class="string">&quot;3&quot;</span>, <span class="string">&quot;9.22&quot;</span>, <span class="string">&quot;337.78&quot;</span>, <span class="string">&quot;80.99&quot;</span>, <span class="string">&quot;2.7&quot;</span>, <span class="string">&quot;50&quot;</span>, <span class="string">&quot;0&quot;</span>, <span class="string">&quot;0&quot;</span>, <span class="string">&quot;0&quot;</span>, <span class="string">&quot;7&quot;</span>, <span class="string">&quot;5&quot;</span>, <span class="string">&quot;21&quot;</span>, <span class="string">&quot;2.7&quot;</span>, <span class="string">&quot;2.7&quot;</span>, <span class="string">&quot;80.99&quot;</span>, <span class="string">&quot;10&quot;</span>, <span class="string">&quot;0&quot;</span>, <span class="string">&quot;0&quot;</span>, <span class="string">&quot;7&quot;</span>, <span class="string">&quot;0&quot;</span>, <span class="string">&quot;21&quot;</span>, <span class="string">&quot;5&quot;</span>, <span class="string">&quot;10&quot;</span>, <span class="string">&quot;2.7&quot;</span>, <span class="string">&quot;2.7&quot;</span>, <span class="string">&quot;80.99&quot;</span>, <span class="string">&quot;0&quot;</span>, <span class="string">&quot;0&quot;</span>, <span class="string">&quot;0&quot;</span>, <span class="string">&quot;7&quot;</span>, <span class="string">&quot;5&quot;</span>, <span class="string">&quot;21&quot;</span>, <span class="string">&quot;2.7&quot;</span>, <span class="string">&quot;2.7&quot;</span>, <span class="string">&quot;80.99&quot;</span>, <span class="string">&quot;10&quot;</span>, <span class="string">&quot;7&quot;</span>, <span class="string">&quot;0&quot;</span>, <span class="string">&quot;0&quot;</span>, <span class="string">&quot;0&quot;</span>, <span class="string">&quot;21&quot;</span>, <span class="string">&quot;5&quot;</span>, <span class="string">&quot;10&quot;</span>, <span class="string">&quot;2.7&quot;</span>, <span class="string">&quot;2.7&quot;</span>, <span class="string">&quot;80.99&quot;</span>, <span class="string">&quot;26&quot;</span>, <span class="string">&quot;0&quot;</span>, <span class="string">&quot;0&quot;</span>, <span class="string">&quot;0&quot;</span>, <span class="string">&quot;7&quot;</span>, <span class="string">&quot;2.7&quot;</span>, <span class="string">&quot;40.5&quot;</span>, <span class="string">&quot;2.7&quot;</span>, <span class="string">&quot;40.5&quot;</span>, <span class="string">&quot;10&quot;</span>, <span class="string">&quot;2.7&quot;</span>, <span class="string">&quot;21&quot;</span>, <span class="string">&quot;4&quot;</span>, <span class="string">&quot;13&quot;</span>, <span class="string">&quot;7&quot;</span>, <span class="string">&quot;0&quot;</span>, <span class="string">&quot;0&quot;</span>, <span class="string">&quot;0&quot;</span>&#125;;</span><br><span class="line"></span><br><span class="line">        List&lt;String&gt; la = Arrays.asList(a);</span><br><span class="line">        List&lt;String&gt; lb = Arrays.asList(b);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;disjoint = &quot;</span> + Collections.disjoint(la, lb));</span><br><span class="line">        System.out.println(<span class="string">&quot;different = &quot;</span> + getDifferent(la, lb) + getDifferent(lb, la));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> List&lt;String&gt; <span class="title">getDifferent</span><span class="params">(List&lt;String&gt; l1, List&lt;String&gt; l2)</span> </span>&#123;</span><br><span class="line">        Map&lt;String, Integer&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;(l1.size(), l2.size());</span><br><span class="line">        List&lt;String&gt; diff = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        List&lt;String&gt; maxList = l1;</span><br><span class="line">        List&lt;String&gt; minList = l2;</span><br><span class="line">        <span class="keyword">if</span> (l2.size() &gt; l1.size()) &#123;</span><br><span class="line">            maxList = l2;</span><br><span class="line">            minList = l1;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (String string : maxList) &#123;</span><br><span class="line">            map.put(string, <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (String string : minList) &#123;</span><br><span class="line">            Integer cc = map.get(string);</span><br><span class="line">            <span class="keyword">if</span> (cc != <span class="keyword">null</span>) &#123;</span><br><span class="line">                map.put(string, ++cc);</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            map.put(string, <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (Map.Entry&lt;String, Integer&gt; entry : map.entrySet()) &#123;</span><br><span class="line">            <span class="keyword">if</span> (entry.getValue() == <span class="number">1</span>) &#123;</span><br><span class="line">                diff.add(entry.getKey());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> diff;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>disjoint = false<br>different = [40.49][40.5]</p>
</blockquote>
<h3 id="属性非空校验类"><a href="#属性非空校验类" class="headerlink" title="属性非空校验类"></a>属性非空校验类</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Validate</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String ALL_FIELDS = <span class="string">&quot;ALL&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String INCLUDE_FIELDS = <span class="string">&quot;INCLUDE&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String EXCLUDE_FIELDS = <span class="string">&quot;EXCLUDE&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 实体属性非空校验</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> obj      实体</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> checkAll 校验所有属性</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">validate</span><span class="params">(Object obj, String checkAll)</span> </span>&#123;</span><br><span class="line">        Field[] fields = obj.getClass().getDeclaredFields();</span><br><span class="line">        List&lt;String&gt; keySet = Arrays.stream(fields).map(Field::getName).collect(Collectors.toList());</span><br><span class="line">        <span class="keyword">if</span> (ALL_FIELDS.equalsIgnoreCase(checkAll)) &#123;</span><br><span class="line">            validate(obj, keySet);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> obj       实体</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> checkPart include or exclude</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> part      待校验属性</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">validate</span><span class="params">(Object obj, String checkPart, Collection&lt;String&gt; part)</span> </span>&#123;</span><br><span class="line">        Field[] fields = obj.getClass().getDeclaredFields();</span><br><span class="line">        <span class="keyword">if</span> (INCLUDE_FIELDS.equalsIgnoreCase(checkPart)) &#123;</span><br><span class="line">            validate(obj, part);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (EXCLUDE_FIELDS.equalsIgnoreCase(checkPart)) &#123;</span><br><span class="line">            List&lt;String&gt; check = Arrays.stream(fields).map(Field::getName).filter(f -&gt; !part.contains(f)).collect(Collectors.toList());</span><br><span class="line">            validate(obj, check);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> map      校验map</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> checkSet 待校验key</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">validate</span><span class="params">(Map&lt;String, Object&gt; map, Collection&lt;String&gt; checkSet)</span> </span>&#123;</span><br><span class="line">        List&lt;String&gt; notNull = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (String check : checkSet) &#123;</span><br><span class="line">            <span class="keyword">for</span> (String key : map.keySet()) &#123;</span><br><span class="line">                <span class="keyword">if</span> (!check.equals(key)) &#123;</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                String value = map.get(check) == <span class="keyword">null</span> ? <span class="string">&quot;&quot;</span> : String.valueOf(map.get(check));</span><br><span class="line">                <span class="keyword">if</span> (value == <span class="keyword">null</span> || <span class="string">&quot;&quot;</span>.equals(value)) &#123;</span><br><span class="line">                    notNull.add(key);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        List&lt;String&gt; notAppear = checkSet.stream().filter(k -&gt; !map.containsKey(k)).collect(Collectors.toList());</span><br><span class="line">        notNull.addAll(notAppear);</span><br><span class="line">        <span class="keyword">if</span> (!notNull.isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">&quot;参数 &quot;</span> + notNull + <span class="string">&quot; 不可为空！&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">validate</span><span class="params">(Object obj, Collection&lt;String&gt; checkSet)</span> </span>&#123;</span><br><span class="line">        Field[] fields = obj.getClass().getDeclaredFields();</span><br><span class="line">        List&lt;String&gt; notNull = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">for</span> (String check : checkSet) &#123;</span><br><span class="line">                <span class="keyword">for</span> (Field field : fields) &#123;</span><br><span class="line">                    <span class="comment">// 打开私有属性，否则只能获取到共有属性</span></span><br><span class="line">                    field.setAccessible(<span class="keyword">true</span>);</span><br><span class="line">                    String name = field.getName();</span><br><span class="line">                    <span class="keyword">if</span> (!check.equals(name)) &#123;</span><br><span class="line">                        <span class="keyword">continue</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    String value = field.get(obj) == <span class="keyword">null</span> ? <span class="string">&quot;&quot;</span> : String.valueOf(field.get(obj));</span><br><span class="line">                    <span class="keyword">if</span> (value == <span class="keyword">null</span> || <span class="string">&quot;&quot;</span>.equals(value)) &#123;</span><br><span class="line">                        notNull.add(name);</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (!notNull.isEmpty()) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">&quot;参数 &quot;</span> + notNull + <span class="string">&quot; 不可为空！&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IllegalAccessException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">&quot;校验失败，异常堆栈信息：&quot;</span> + e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="接口统一返回类"><a href="#接口统一返回类" class="headerlink" title="接口统一返回类"></a>接口统一返回类</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> top.dj.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.http.HttpStatus;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: DengJia</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span>: 2021/9/27 15:30</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: 通用返回</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">R</span> <span class="keyword">extends</span> <span class="title">HashMap</span>&lt;<span class="title">String</span>, <span class="title">Object</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">R</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        put(<span class="string">&quot;code&quot;</span>, <span class="number">0</span>);</span><br><span class="line">        put(<span class="string">&quot;msg&quot;</span>, <span class="string">&quot;success&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> R <span class="title">error</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> error(HttpStatus.INTERNAL_SERVER_ERROR.value(), <span class="string">&quot;未知异常，请联系管理员！&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> R <span class="title">error</span><span class="params">(String msg)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> error(HttpStatus.INTERNAL_SERVER_ERROR.value(), msg);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> R <span class="title">error</span><span class="params">(<span class="keyword">int</span> code, String msg)</span> </span>&#123;</span><br><span class="line">        R r = <span class="keyword">new</span> R();</span><br><span class="line">        r.put(<span class="string">&quot;code&quot;</span>, code);</span><br><span class="line">        r.put(<span class="string">&quot;msg&quot;</span>, msg);</span><br><span class="line">        <span class="keyword">return</span> r;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> R <span class="title">errorData</span><span class="params">(Object obj)</span> </span>&#123;</span><br><span class="line">        R r = <span class="keyword">new</span> R();</span><br><span class="line">        r.put(<span class="string">&quot;errorData&quot;</span>, obj);</span><br><span class="line">        <span class="keyword">return</span> r;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> R <span class="title">ok</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> R();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> R <span class="title">ok</span><span class="params">(String msg)</span> </span>&#123;</span><br><span class="line">        R r = <span class="keyword">new</span> R();</span><br><span class="line">        r.put(<span class="string">&quot;msg&quot;</span>, msg);</span><br><span class="line">        <span class="keyword">return</span> r;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> R <span class="title">ok</span><span class="params">(<span class="keyword">int</span> code, String msg)</span> </span>&#123;</span><br><span class="line">        R r = <span class="keyword">new</span> R();</span><br><span class="line">        r.put(<span class="string">&quot;code&quot;</span>, code);</span><br><span class="line">        r.put(<span class="string">&quot;msg&quot;</span>, msg);</span><br><span class="line">        <span class="keyword">return</span> r;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> R <span class="title">ok</span><span class="params">(Map&lt;String, Object&gt; map)</span> </span>&#123;</span><br><span class="line">        R r = <span class="keyword">new</span> R();</span><br><span class="line">        r.putAll(map);</span><br><span class="line">        <span class="keyword">return</span> r;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> R <span class="title">data</span><span class="params">(Object obj)</span> </span>&#123;</span><br><span class="line">        R r = <span class="keyword">new</span> R();</span><br><span class="line">        r.put(<span class="string">&quot;data&quot;</span>, obj);</span><br><span class="line">        <span class="keyword">return</span> r;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> R <span class="title">data</span><span class="params">(String msg, Object obj)</span> </span>&#123;</span><br><span class="line">        R r = <span class="keyword">new</span> R();</span><br><span class="line">        r.put(<span class="string">&quot;msg&quot;</span>, msg);</span><br><span class="line">        r.put(<span class="string">&quot;data&quot;</span>, obj);</span><br><span class="line">        <span class="keyword">return</span> r;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">put</span><span class="params">(String key, Object value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.put(key, value);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">getCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.get(<span class="string">&quot;code&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="JSON转换工具类（GSON实现）"><a href="#JSON转换工具类（GSON实现）" class="headerlink" title="JSON转换工具类（GSON实现）"></a>JSON转换工具类（GSON实现）</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.lang.reflect.Type;</span><br><span class="line"><span class="keyword">import</span> com.google.gson.Gson;</span><br><span class="line"><span class="keyword">import</span> com.google.gson.GsonBuilder;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * description:</span></span><br><span class="line"><span class="comment"> * json转化工具类 -- 使用gson实现</span></span><br><span class="line"><span class="comment"> * gson为线程安全的类，所以可以使用工具类来减少对象的实例化</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * &lt;dependency&gt;</span></span><br><span class="line"><span class="comment"> *     &lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;</span></span><br><span class="line"><span class="comment"> *     &lt;artifactId&gt;gson&lt;/artifactId&gt;</span></span><br><span class="line"><span class="comment"> *     &lt;version&gt;2.4&lt;/version&gt;</span></span><br><span class="line"><span class="comment"> * &lt;/dependency&gt;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> wkGui</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">//TODO 删除</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GsonUtil</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Gson filterNullGson;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Gson nullableGson;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        nullableGson = <span class="keyword">new</span> GsonBuilder()</span><br><span class="line">                .enableComplexMapKeySerialization()</span><br><span class="line">                .serializeNulls()</span><br><span class="line">                .setDateFormat(<span class="string">&quot;yyyy-MM-dd HH:mm:ss:SSS&quot;</span>)</span><br><span class="line">                .create();</span><br><span class="line">        filterNullGson = <span class="keyword">new</span> GsonBuilder()</span><br><span class="line">                .enableComplexMapKeySerialization()</span><br><span class="line">                .setDateFormat(<span class="string">&quot;yyyy-MM-dd HH:mm:ss:SSS&quot;</span>)</span><br><span class="line">                .create();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="title">GsonUtil</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据对象返回json   不过滤空值字段</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">toJsonWtihNullField</span><span class="params">(Object obj)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> nullableGson.toJson(obj);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据对象返回json  过滤空值字段</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">toJsonFilterNullField</span><span class="params">(Object obj)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> filterNullGson.toJson(obj);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 将json转化为对应的实体对象</span></span><br><span class="line"><span class="comment">     * new TypeToken&lt;HashMap&lt;String, Object&gt;&gt;()&#123;&#125;.getType()</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function">T <span class="title">fromJson</span><span class="params">(String json, Type type)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> nullableGson.fromJson(json, type);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="Java字符串反转"><a href="#Java字符串反转" class="headerlink" title="Java字符串反转"></a>Java字符串反转</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 递归实现字符串的反转</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> str 待反转的字符串</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> 反转后的字符串</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">recursionReverse</span><span class="params">(String str)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (str == <span class="keyword">null</span> || str.length() &lt;= <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> str;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> recursionReverse(str.substring(<span class="number">1</span>)) + str.charAt(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">stringReverse</span><span class="params">(String str)</span> </span>&#123;</span><br><span class="line">    StringBuilder builder = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = str.length() - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">        builder.append(str.charAt(i));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> builder.toString();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="排序"><a href="#排序" class="headerlink" title="排序"></a>排序</h2><blockquote>
<p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/ObJHISnq7kbACYJ70c2k3w">https://mp.weixin.qq.com/s/ObJHISnq7kbACYJ70c2k3w</a></p>
</blockquote>
<h3 id="冒泡排序"><a href="#冒泡排序" class="headerlink" title="冒泡排序"></a>冒泡排序</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SortingAlgorithm</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] array = &#123;<span class="number">4</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">1</span>, <span class="number">7</span>, <span class="number">6</span>&#125;;</span><br><span class="line">        bubbleSortImprove(array);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * 冒泡排序</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     *      - 时间复杂度 O(N^2);</span></span><br><span class="line"><span class="comment">     *      - 稳定性，冒泡排序是稳定的算法;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 冒泡排序</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> array 待排序的数组</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">bubbleSort</span><span class="params">(<span class="keyword">int</span>[] array)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> l = array.length;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = l - <span class="number">1</span>; i &gt; <span class="number">0</span>; i--) &#123;</span><br><span class="line">            <span class="comment">// 将 array[0...i] 中最大的数据放在末尾</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; i; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (array[j] &gt; array[j + <span class="number">1</span>]) &#123;</span><br><span class="line">                    <span class="comment">// 交换array[j] 和 array[j + 1]</span></span><br><span class="line">                    <span class="keyword">int</span> temp = array[j];</span><br><span class="line">                    array[j] = array[j + <span class="number">1</span>];</span><br><span class="line">                    array[j + <span class="number">1</span>] = temp;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(Arrays.toString(array));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 冒泡排序（改进版），若某一次循环未发生交换，说明该数组已经有序。</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> array 待排序的数组</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">bubbleSortImprove</span><span class="params">(<span class="keyword">int</span>[] array)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> l = array.length;</span><br><span class="line">        <span class="keyword">boolean</span> flag;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = l - <span class="number">1</span>; i &gt; <span class="number">0</span>; i--) &#123;</span><br><span class="line">            <span class="comment">// 初始化标记</span></span><br><span class="line">            flag = <span class="keyword">true</span>;</span><br><span class="line">            <span class="comment">// 将 array[0...i] 中最大的数据放在末尾</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; i; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (array[j] &gt; array[j + <span class="number">1</span>]) &#123;</span><br><span class="line">                    <span class="comment">// 交换array[j] 和 array[j + 1]</span></span><br><span class="line">                    <span class="keyword">int</span> temp = array[j];</span><br><span class="line">                    array[j] = array[j + <span class="number">1</span>];</span><br><span class="line">                    array[j + <span class="number">1</span>] = temp;</span><br><span class="line">                    <span class="comment">// 发生交换，置标记为false</span></span><br><span class="line">                    flag = <span class="keyword">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (flag) &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(Arrays.toString(array));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="快速排序"><a href="#快速排序" class="headerlink" title="快速排序"></a>快速排序</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SortingAlgorithm</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] array = &#123;<span class="number">7</span>, <span class="number">6</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>&#125;;</span><br><span class="line">        quickSort(array, <span class="number">0</span>, array.length - <span class="number">1</span>);</span><br><span class="line">        System.out.println(Arrays.toString(array));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * 快速排序（使用了分治法策略）</span></span><br><span class="line"><span class="comment">     *      - 基本流程</span></span><br><span class="line"><span class="comment">     *          - 从数列中挑出一个基准值;</span></span><br><span class="line"><span class="comment">     *          - 将所有比基准值小的摆放在基准前面, 所有比基准值大的摆在基准的后面;</span></span><br><span class="line"><span class="comment">     *          - 递归地把 &quot;基准值前面的子数列&quot; 和 &quot;基准值后面的子数列&quot; 进行排序.</span></span><br><span class="line"><span class="comment">     *      - 时间复杂度</span></span><br><span class="line"><span class="comment">     *          - 最坏 O(N^2)</span></span><br><span class="line"><span class="comment">     *          - 平均 O(N*lgN)</span></span><br><span class="line"><span class="comment">     *      - 稳定性，快速排序是不稳定的算法;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 快速排序</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> array -- 待排序的数组</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> left  -- 数组的左边界(例如，从起始位置开始排序，则left = 0)</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> right -- 数组的右边界(例如，排序截至到数组末尾，则right = array.length - 1)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">quickSort</span><span class="params">(<span class="keyword">int</span>[] array, <span class="keyword">int</span> left, <span class="keyword">int</span> right)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (left &lt; right) &#123;</span><br><span class="line">            <span class="keyword">int</span> i, j, tmp;</span><br><span class="line">            i = left;</span><br><span class="line">            j = right;</span><br><span class="line">            tmp = array[i];</span><br><span class="line"></span><br><span class="line">            <span class="keyword">while</span> (i &lt; j) &#123;</span><br><span class="line">                <span class="keyword">while</span> (i &lt; j &amp;&amp; array[j] &gt; tmp) &#123;</span><br><span class="line">                    <span class="comment">// 从右向左找第一个小于tmp的数</span></span><br><span class="line">                    j--;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (i &lt; j) &#123;</span><br><span class="line">                    array[i++] = array[j];</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">while</span> (i &lt; j &amp;&amp; array[i] &lt; tmp) &#123;</span><br><span class="line">                    <span class="comment">// 从左向右找第一个大于tmp的数</span></span><br><span class="line">                    i++;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (i &lt; j) &#123;</span><br><span class="line">                    array[j--] = array[i];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            array[i] = tmp;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 递归调用</span></span><br><span class="line">            quickSort(array, left, i - <span class="number">1</span>);</span><br><span class="line">            <span class="comment">// 递归调用</span></span><br><span class="line">            quickSort(array, i + <span class="number">1</span>, right);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="直接插入排序"><a href="#直接插入排序" class="headerlink" title="直接插入排序"></a>直接插入排序</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SortingAlgorithm</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        straightInsertionSort(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">7</span>, <span class="number">6</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>&#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * 直接插入排序</span></span><br><span class="line"><span class="comment">     *      - 基本流程</span></span><br><span class="line"><span class="comment">     *          - 把n个待排序的元素看成为一个有序表和一个无序表;</span></span><br><span class="line"><span class="comment">     *          - 开始时有序表中只包含1个元素，无序表中包含有n-1个元素；</span></span><br><span class="line"><span class="comment">     *          - 排序过程中每次从无序表中取出第一个元素;</span></span><br><span class="line"><span class="comment">     *          - 将它插入到有序表中的适当位置，使之成为新的有序表;</span></span><br><span class="line"><span class="comment">     *          - 重复n-1次可完成排序过程;</span></span><br><span class="line"><span class="comment">     *      - 时间复杂度</span></span><br><span class="line"><span class="comment">     *          - 最坏 O(N^2)</span></span><br><span class="line"><span class="comment">     *      - 稳定性，直接插入排序是稳定的算法;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 直接插入排序</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> array 待排序的数组</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">straightInsertionSort</span><span class="params">(<span class="keyword">int</span>[] array)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> i, j, k;</span><br><span class="line">        <span class="keyword">int</span> l = array.length;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (i = <span class="number">1</span>; i &lt; l; i++) &#123;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 为array[i]在前面的array[0...i-1]有序区间中找一个合适的位置</span></span><br><span class="line">            <span class="keyword">for</span> (j = i - <span class="number">1</span>; j &gt;= <span class="number">0</span>; j--) &#123;</span><br><span class="line">                <span class="keyword">if</span> (array[j] &lt; array[i]) &#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 若找到一个合适的位置</span></span><br><span class="line">            <span class="keyword">if</span> (j != i - <span class="number">1</span>) &#123;</span><br><span class="line">                <span class="comment">// 将比array[i]大的数往后移</span></span><br><span class="line">                <span class="keyword">int</span> tmp = array[i];</span><br><span class="line">                <span class="keyword">for</span> (k = i - <span class="number">1</span>; k &gt; j; k--) &#123;</span><br><span class="line">                    array[k + <span class="number">1</span>] = array[k];</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="comment">// 将array[i]放在正确的位置上</span></span><br><span class="line">                array[k + <span class="number">1</span>] = tmp;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(Arrays.toString(array));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>


                <hr>

                

                <ul class="pager">
                    
                        <li class="previous">
                            <a href="/2021/09/07/c7-install/" data-toggle="tooltip" data-placement="top" title="CentOS7安装及后续">◀ Previous Post</a>
                        </li>
                    
                    
                        <li class="next">
                            <a href="/2021/06/16/up-image-harbor/" data-toggle="tooltip" data-placement="top" title="将本地镜像上传到Harbor仓库以及下载">Next Post ▶</a>
                        </li>
                    
                </ul>

                

                

            </div>
    <!-- Side Catalog Container -->
        

    <!-- Sidebar Container -->

            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                sidebar-container">

                <!-- Featured Tags -->
                
                <section>
                    <!-- no hr -->
                    <h5><a href="/tags/">FEATURED TAGS</a></h5>
                    <div class="tags">
                       
                          <a class="tag" href="/tags/#MySQL" title="MySQL">MySQL</a>
                        
                          <a class="tag" href="/tags/#Shell" title="Shell">Shell</a>
                        
                          <a class="tag" href="/tags/#Java" title="Java">Java</a>
                        
                    </div>
                </section>
                

                <!-- Friends Blog -->
                
                <hr>
                <h5>FRIENDS</h5>
                <ul class="list-inline">

                    
                        <li><a href="https://github.com/DENG-JIAAA/" target="_blank">Github</a></li>
                    
                        <li><a href="https://gitee.com/DENG-JIAAA" target="_blank">Gitee</a></li>
                    
                        <li><a href="https://www.cnblogs.com/DJOSIMON/" target="_blank">cnblogs</a></li>
                    
                        <li><a href="https://huangxuan.me/" target="_blank">Hux Blog</a></li>
                    
                        <li><a href="http://kaijun.rocks/hexo-theme-huxblog/" target="_blank">Kaijun&#39;s Blog</a></li>
                    
                </ul>
                
            </div>

        </div>
    </div>
</article>









<!-- Footer -->
<!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                    
                    
                        <li>
                            <a target="_blank" href="https://twitter.com/DENG_JIAAA">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                            </span>
                            </a>
                        </li>
                    
                    

                    
                        <li>
                            <a target="_blank" href="http://weibo.com/dengjiaaa">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-weibo fa-stack-1x fa-inverse"></i>
                            </span>
                            </a>
                        </li>
                    

                    
                        <li>
                            <a target="_blank" href="https://www.facebook.com/jia.deng.568089">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
                            </span>
                            </a>
                        </li>
                    

                    
                        <li>
                            <a target="_blank" href="https://github.com/DENG-JIAAA">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                            </a>
                        </li>
                    

                    

                </ul>
                <p class="copyright text-muted">
                    Copyright &copy; 2020-2023 <a href="http://dengjia.top/">Jia`s Blog</a>
                    <br>
                    Theme by <a target="_blank" rel="noopener" href="https://github.com/huxpro/huxpro.github.io">Hux</a>

                    <!--<span style="display: inline-block; margin: 0 5px;">
                        <i class="fa fa-heart"></i>
                    </span>
                    Ported by <a target="_blank" rel="noopener" href="http://blog.kaijun.rocks">Kaijun</a> |
                    <iframe
                        style="margin-left: 2px; margin-bottom:-5px;"
                        frameborder="0" scrolling="0" width="91px" height="20px"
                        src="https://ghbtns.com/github-btn.html?user=kaijun&repo=hexo-theme-huxblog&type=star&count=true" >
                    </iframe>-->

                </p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->

<script src="/js/jquery.min.js"></script>


<!-- Bootstrap Core JavaScript -->

<script src="/js/bootstrap.min.js"></script>


<!-- Custom Theme JavaScript -->

<script src="/js/hux-blog.min.js"></script>


<!-- async load function -->
<script>
    function async(u, c) {
        var d = document, t = 'script',
            o = d.createElement(t),
            s = d.getElementsByTagName(t)[0];
        o.src = u;
        if (c) {
            o.addEventListener('load', function (e) {
                c(null, e);
            }, false);
        }
        s.parentNode.insertBefore(o, s);
    }
</script>

<!--
     Because of the native support for backtick-style fenced code blocks
     right within the Markdown is landed in Github Pages,
     From V1.6, There is no need for Highlight.js,
     so Huxblog drops it officially.

     - https://github.com/blog/2100-github-pages-now-faster-and-simpler-with-jekyll-3-0
     - https://help.github.com/articles/creating-and-highlighting-code-blocks/
-->
<!--
    <script>
        async("http://cdn.bootcss.com/highlight.js/8.6/highlight.min.js", function(){
            hljs.initHighlightingOnLoad();
        })
    </script>
    <link href="http://cdn.bootcss.com/highlight.js/8.6/styles/github.min.css" rel="stylesheet">
-->

<!-- jquery.tagcloud.js -->
<script>
    // only load tagcloud.js in tag.html
    if ($('#tag_cloud').length !== 0) {
        async("http://dengjia.top/js/jquery.tagcloud.js", function () {
            $.fn.tagcloud.defaults = {
                //size: {start: 1, end: 1, unit: 'em'},
                color: {start: '#bbbbee', end: '#0085a1'},
            };
            $('#tag_cloud a').tagcloud();
        })
    }
</script>

<!--fastClick.js -->
<script>
    async("https://cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js", function () {
        var $nav = document.querySelector("nav");
        if ($nav) FastClick.attach($nav);
    })
</script>

<!-- Google Analytics -->


<!-- Baidu TongJi -->


<!-- Side Catalog -->




<!-- Image to hack wechat -->
<img src="http://dengjia.top/img/icon_wechat.png" width="0" height="0"/>
<!-- Migrate from head to bottom, no longer block render and still work -->
</body>

</html>
